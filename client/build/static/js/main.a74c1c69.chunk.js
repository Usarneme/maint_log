(this.webpackJsonpmaint_log_frontend_react=this.webpackJsonpmaint_log_frontend_react||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(23),l=a.n(o),s=a(19),c=a(20),i=a(22),u=a(21),m=r.a.createContext(),d=m.Provider,p=m.Consumer,h=m,g=a(2),v=a(7),f=a(6),E=(a(61),a(1)),b=a.n(E),_=a(51),w=a(4),k=a(10),y=a(13),N=a.n(y),O=a(8),C=a.n(O);a(81);var S=function(e){return e&&e.message?r.a.createElement("div",{className:"loading"},e.message.charAt(0).toUpperCase()+e.message.slice(1)):null};a(82);var j=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"photos__header"},"Photos"),r.a.createElement("div",{className:"photos__div"},e.photos.map((function(t){return""===t||0===t.length?null:r.a.createElement("div",{key:t,className:"single__photo__div"},r.a.createElement("img",{className:"single__photo",src:"http://res.cloudinary.com/c00p/image/upload/".concat(t),alt:t}),!e.editingBlocked&&r.a.createElement(g.b,{className:"button delete__photo",to:"/delete/photo/".concat(t),onClick:e.deletePhoto,title:"Delete This Photo"},"Delete Photo"))}))))},x=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){if(e.target.files)return n.setState({file:e.target.files[0]});n.setState(Object(k.a)({},e.target.name,e.target.value))},n.apiEditLog=function(){var e=Object(w.a)(b.a.mark((function e(t){var a,r,o,l,s,c,i,u,m;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({loading:!0}),a="",a=n.props&&n.props.log?"".concat("https://maint-log.herokuapp.com","/add/").concat(n.props.log.id):"".concat("https://maint-log.herokuapp.com","/add"),(r=new FormData(document.getElementById("logForm"))).append("dateEntered",N()(Date.now()).format("YYYY-MM-DD")),r.append("api",!0),n.props.log&&n.props.log.photos&&n.props.log.photos.length>0?r.append("photos",n.props.log.photos):r.append("photos",[]),n.state.id&&r.append("id",n.state.id),console.log("FORM DATA before posting:"),o=Object(_.a)(r);try{for(o.s();!(l=o.n()).done;)s=l.value,console.log(r[s],s)}catch(d){o.e(d)}finally{o.f()}return e.prev=12,e.next=15,C.a.post(a,r);case 15:if(c=e.sent,console.log("result received"),console.log(c),200!==c.status){e.next=27;break}i=c.data.fullLog,u=c.data.newLogEntry,(m=n.props.user).log=i,n.props.updateUserState(m),n.props.history.push("/log/".concat(u.slug)),e.next=30;break;case 27:throw console.log("Response received but with status code: "+c.status),new Error(c.error);case 30:e.next=40;break;case 32:e.prev=32,e.t0=e.catch(12),console.log("Error with LogForm. Unable to add/edit Log Entry. Please try again later."),console.dir(e.t0),console.log(e.t0),console.table(e.t0),n.setState({loading:!1}),Object(f.b)(e.t0);case 40:case"end":return e.stop()}}),e,null,[[12,32]])})));return function(t){return e.apply(this,arguments)}}(),n.toggleDeleteButton=Object(w.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({showDeleteButton:!n.state.showDeleteButton});case 1:case"end":return e.stop()}}),e)}))),n.deleteLogEntry=function(){var e=Object(w.a)(b.a.mark((function e(t){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.setState({loading:!0});case 3:return e.prev=3,e.next=6,C.a.post("".concat("https://maint-log.herokuapp.com","/delete/log/entry/").concat(n.state.id));case 6:if(null!==(a=e.sent).data){e.next=13;break}return console.log("Server unable to find specified log entry. Was it already deleted?"),e.next=11,n.setState({loading:!1});case 11:e.next=20;break;case 13:if(200!==a.status){e.next=20;break}return r=n.props.user.log.filter((function(e){return e.id!==n.state.id})),(o=n.props.user).log=r,e.next=19,n.props.updateUserState(o);case 19:n.props.history.push("/log");case 20:e.next=27;break;case 22:return e.prev=22,e.t0=e.catch(3),console.error(e.t0),e.next=27,n.setState({loading:!1});case 27:case"end":return e.stop()}}),e,null,[[3,22]])})));return function(t){return e.apply(this,arguments)}}(),n.deletePhoto=function(){var e=Object(w.a)(b.a.mark((function e(t){var a,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a="".concat("https://maint-log.herokuapp.com").concat(t.target.pathname),e.prev=2,e.next=5,C.a.post(a);case 5:null===(r=e.sent).data?console.log("Server unable to find specified photo to delete. Was it already deleted?"):200===r.status&&((o=n.props.user).log=r.data,n.props.updateUserState(o),n.props.history.push("/log/".concat(n.props.log._id,"/edit"))),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),Object(f.b)("Problem deleting photo. Please try again."),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),n.alignViewToElement=function(e){e.preventDefault(),e.target.scrollIntoView({block:"center",inline:"nearest",behavior:"smooth"})},n.state={id:"",shortDescription:"",longDescription:"",dateStarted:"",dateCompleted:"",dateEntered:"",dateDue:"",file:"",mileageDue:"",name:"",odometer:"",tools:"",parts:"",partsCost:"",laborCost:"",serviceLocation:"",photos:[],receipts:"",vehicle:"",showDeleteButton:!1,loading:!0,api:!0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){if(!this.props)return this.setState({loading:!1});if(!this.props.log)return this.setState({loading:!1});var e="",t="",a="",n="";this.props.log.dateStarted&&(e=N()(this.props.log.dateStarted).format("YYYY-MM-DD")),this.props.log.dateCompleted&&(t=N()(this.props.log.dateCompleted).format("YYYY-MM-DD")),this.props.log.dateEntered&&(a=N()(this.props.log.dateEntered).format("YYYY-MM-DD")),this.props.log.dateDue&&(n=N()(this.props.log.dateDue).format("YYYY-MM-DD")),this.setState({id:this.props.log.id,shortDescription:this.props.log.shortDescription,longDescription:this.props.log.longDescription,dateStarted:e,dateCompleted:t,dateEntered:a,dateDue:n,mileageDue:this.props.log.mileageDue||"",name:this.props.log.name,odometer:this.props.log.odometer,tools:this.props.log.tools,parts:this.props.log.parts,partsCost:this.props.log.partsCost,laborCost:this.props.log.laborCost,serviceLocation:this.props.log.serviceLocation,receipts:this.props.log.receipts,vehicle:this.props.log.vehicle,selectedVehicles:this.props.user.selectedVehicles&&this.props.user.selectedVehicles.length>0&&void 0!==this.props.user.selectedVehicles[0]&&this.props.user.selectedVehicles||this.props.user.vehicles,loading:!1})}},{key:"render",value:function(){return this.state.loading?r.a.createElement(S,{message:"Formatting and Saving Log Changes..."}):!this.props.user.vehicles||this.props.user.vehicles.length<1||this.props.user.vehicles.length>0&&void 0===this.props.user.vehicles[0]?r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"No Vehicle Associated With This Account"),r.a.createElement("div",{className:"card no__vehicle warning"},r.a.createElement("span",null,"Before entering a service record, please: "),r.a.createElement(g.b,{to:"/settings",className:"button"},"Click Here To Add A Vehicle To Your Account"))):r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,this.state.id?r.a.createElement("span",null,"Editing",r.a.createElement(g.b,{to:"/log/".concat(this.props.log.slug)},this.state.name.length>120?" ".concat(this.state.name.substring(0,120),"... "):" ".concat(this.state.name," "))):"Add New Log Entry"),r.a.createElement("div",{className:"card padded"},r.a.createElement("form",{className:"form",id:"logForm",onSubmit:this.apiEditLog,method:"POST",encType:"multipart/form-data",multiple:"multiple"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",autoFocus:!0,value:this.state.name,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"vehicle"},"Vehicle"),r.a.createElement("select",{id:"vehicle",name:"vehicle",required:"required",defaultValue:"Please select a vehicle...",onChange:this.handleInputChange},this.props.user.vehicles&&this.props.user.vehicles.length>0&&this.props.user.vehicles.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},"".concat(e.year," ").concat(e.make," ").concat(e.model))}))),r.a.createElement("label",{htmlFor:"dateStarted"},"Date Started"),r.a.createElement("input",{type:"date",name:"dateStarted",value:this.state.dateStarted,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"dateCompleted"},"Date Completed"),r.a.createElement("input",{type:"date",name:"dateCompleted",value:this.state.dateCompleted,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"dateDue"},"On what date will this item need to be completed next?"),r.a.createElement("input",{type:"date",name:"dateDue",value:this.state.dateDue,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"mileageDue"},"At what mileage will this item need to be completed next?"),r.a.createElement("input",{type:"number",name:"mileageDue",min:"0",step:"1",value:this.state.mileageDue,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"shortDescription"},"Short Description"),r.a.createElement("textarea",{name:"shortDescription",autoComplete:"on",spellCheck:"true",value:this.state.shortDescription,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"longDescription"},"Long Description"),r.a.createElement("textarea",{name:"longDescription",autoComplete:"on",spellCheck:"true",value:this.state.longDescription,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"tools"},"Tools"),r.a.createElement("input",{type:"text",name:"tools",value:this.state.tools,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"parts"},"Parts"),r.a.createElement("input",{type:"text",name:"parts",value:this.state.parts,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"partsCost"},"Cost of Parts"),r.a.createElement("span",{className:"moneySign"},"$",r.a.createElement("input",{className:"moneyInput",type:"number",name:"partsCost",min:"0",step:"0.01",value:this.state.partsCost,onChange:this.handleInputChange,onFocus:this.alignViewToElement})),r.a.createElement("label",{htmlFor:"laborCost"},"Cost of Labor"),r.a.createElement("span",{className:"moneySign"},"$",r.a.createElement("input",{className:"moneyInput",type:"text",name:"laborCost",min:"0",step:"0.01",value:this.state.laborCost,onChange:this.handleInputChange,onFocus:this.alignViewToElement})),r.a.createElement("label",{htmlFor:"serviceLocation"},"Service Location (Name and Address of Mechanic or Self)"),r.a.createElement("input",{type:"text",name:"serviceLocation",value:this.state.serviceLocation,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"odometer"},"Odometer"),r.a.createElement("input",{type:"number",name:"odometer",min:"0",value:this.state.odometer,onChange:this.handleInputChange,onFocus:this.alignViewToElement}),r.a.createElement("label",{htmlFor:"file"},"Upload other images",r.a.createElement("input",{type:"file",name:"file",accept:"image/gif, image/png, image/jpeg",onChange:this.handleInputChange})),r.a.createElement("button",{className:"button submit",type:"submit"},"Save Log")),this.props.log&&this.props.log.photos&&this.props.log.photos.length>0&&r.a.createElement(j,{photos:this.props.log.photos,deletePhoto:this.deletePhoto}),this.state.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button delete__log__entry",onClick:this.toggleDeleteButton,title:"Delete Log Entry"},"Delete Log Entry"),this.state.showDeleteButton&&r.a.createElement("button",{className:"button delete__log__entry__confirm",onClick:this.deleteLogEntry,title:"Permanently Delete Log Entry"},"Permanently Delete Log Entry"))))}}]),a}(r.a.Component);var D=function(e){var t=Object(v.g)();return r.a.createElement(x,Object.assign({},e,{history:t}))};var L=function(e){var t=Object(v.g)(),a=Object(v.i)().id,n=e.user.log.filter((function(e){return e.id===a}));return r.a.createElement(x,Object.assign({},e,{log:n[0],history:t}))},V=a(3),I=a(5);a(90);var F=function(e){var t=Object(n.useState)(!1),a=Object(I.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)(!1),c=Object(I.a)(s,2),i=c[0],u=c[1],m=r.a.createRef(),d=function(){var e=Object(w.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log("Forgot password form submitted."),console.log(m.current.value),(a=m.current.value)&&!(a.length<1)){e.next=6;break}return e.abrupt("return",Object(f.b)("Please enter a valid email before attempting to request a password reset."));case 6:return u(!0),e.prev=7,console.log("posting to: ".concat("https://maint-log.herokuapp.com","/account/forgot")),e.next=11,C.a.post("".concat("https://maint-log.herokuapp.com","/account/forgot"),{email:a});case 11:if(n=e.sent,console.log(n),console.dir(n),u(!1),200!==n.status){e.next=17;break}return e.abrupt("return",Object(f.b)("Password reset requested successfully. Please check your email soon."));case 17:throw console.log("Response received but with status code: "+n.status),new Error(n.error);case 22:return e.prev=22,e.t0=e.catch(7),console.log("Error posting to /account/forgot"),console.dir(e.t0),e.abrupt("return",Object(f.b)(e.t0));case 27:case"end":return e.stop()}}),e,null,[[7,22]])})));return function(t){return e.apply(this,arguments)}}();return i?r.a.createElement(S,{message:"Sending password reset email..."}):o?o?r.a.createElement("div",{className:"forgot__password__container padded"},r.a.createElement("button",{className:"button close__button",onClick:function(){return l(!1)}},"\xd7"),r.a.createElement("h3",null,"I forgot my password!"),r.a.createElement("form",{onSubmit:d,method:"POST"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email...",defaultValue:e.email,ref:m}),r.a.createElement("button",{className:"button",type:"submit"},"Send a Reset"))):void 0:r.a.createElement("div",{className:"padded"},r.a.createElement("button",{className:"button",onClick:function(){return l(!0)}},"Forgot Your Password?"))};function M(e,t){return P.apply(this,arguments)}function P(){return(P=Object(w.a)(b.a.mark((function e(t,a){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}return e.abrupt("return",new Error("No email or password provided to Login."));case 2:return e.prev=2,e.next=5,C.a.post("".concat("https://maint-log.herokuapp.com","/api/login"),{email:t,password:a});case 5:if(200!==(n=e.sent).status){e.next=14;break}return(r=n.data).userID=n.data._id,0===(o=r.vehicles.filter((function(e){return e.primary}))).length?r.selectedVehicles=[r.vehicles[0]]:r.selectedVehicles=o,e.abrupt("return",{user:r});case 14:throw console.log("Response received but with status code: "+n.status),new Error(n.error);case 17:e.next=24;break;case 19:return e.prev=19,e.t0=e.catch(2),console.log("Error posting to ".concat("https://maint-log.herokuapp.com","/api/login")),console.dir(e.t0),e.abrupt("return",e.t0);case 24:case"end":return e.stop()}}),e,null,[[2,19]])})))).apply(this,arguments)}function U(e,t,a,n){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(b.a.mark((function e(t,a,n,r){var o,l,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&n&&r){e.next=2;break}return e.abrupt("return",new Error("Not all registration information provided. Please make sure you have entered a username, email address, password, and confirmed your password before trying again."));case 2:return o="".concat("https://maint-log.herokuapp.com","/api/register"),e.prev=3,e.next=6,C.a.post(o,{name:t,email:a,password:n,passwordConfirm:r});case 6:if(200!==(l=e.sent).status){e.next=16;break}return(s=l.data).userID=l.data._id,s.selectedVehicles=[],s.vehicles=[],s.log=[],e.abrupt("return",{user:s});case 16:throw console.log("Registration response received from the server but with an error and status code: "+l.status),new Error(l.error);case 19:e.next=26;break;case 21:return e.prev=21,e.t0=e.catch(3),console.log("Error posting to ".concat("https://maint-log.herokuapp.com","/api/register")),console.log(e.t0.response.status),e.abrupt("return",e.t0);case 26:case"end":return e.stop()}}),e,null,[[3,21]])})))).apply(this,arguments)}function T(e,t,a){return Y.apply(this,arguments)}function Y(){return(Y=Object(w.a)(b.a.mark((function e(t,a,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("".concat("https://maint-log.herokuapp.com","/account/reset/").concat(t),{token:t,password:a,passwordConfirm:n});case 3:if((r=e.sent)&&r.data&&r.data.selectedVehicles&&void 0!==r.data.selectedVehicles||(r.data.selectedVehicles=[]),200!==r.status){e.next=7;break}return e.abrupt("return",r.data);case 7:throw console.log("Response received but with status code: "+r.status),new Error(r.error);case 12:return e.prev=12,e.t0=e.catch(0),console.log("Error posting to /account/reset."),console.dir(e.t0),e.abrupt("return",Object(f.b)("Error resetting account password. Please try again."));case 17:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function R(){return B.apply(this,arguments)}function B(){return(B=Object(w.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("".concat("https://maint-log.herokuapp.com","/api/log"));case 3:if(t=e.sent,console.log("getLogData returned: "),console.dir(t),200!==t.status){e.next=8;break}return e.abrupt("return",t.data);case 8:throw console.log("Response received but with status code: "+t.status),new Error(t.error);case 13:e.prev=13,e.t0=e.catch(0),console.log("Error getting data from /api/log/"),console.dir(e.t0),Object(f.b)("Error getting log data please try again");case 18:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function q(e){return H.apply(this,arguments)}function H(){return(H=Object(w.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.post("".concat("https://maint-log.herokuapp.com","/api/vehicle/add"),t);case 3:if(200!==(a=e.sent).status){e.next=6;break}return e.abrupt("return",R());case 6:throw console.log("Response received but with status code: "+a.status),new Error(a.error);case 11:return e.prev=11,e.t0=e.catch(0),console.log("Error posting to /api/vehicle/add."),console.dir(e.t0),e.abrupt("return",Object(f.b)("Error adding new vehicle. Please try again."));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function W(e){return $.apply(this,arguments)}function $(){return($=Object(w.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Updating an extant vehicle: "),console.dir(t),e.prev=2,e.next=5,C.a.post("".concat("https://maint-log.herokuapp.com","/api/vehicle"),t);case 5:if(200!==(a=e.sent).status){e.next=8;break}return e.abrupt("return",R());case 8:throw console.log("Response received but with status code: "+a.status),new Error(a.error);case 13:return e.prev=13,e.t0=e.catch(2),console.log("Error posting to /api/vehicle."),console.dir(e.t0),e.abrupt("return",Object(f.b)("Error updating vehicle. Please try again."));case 18:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function J(e){return z.apply(this,arguments)}function z(){return(z=Object(w.a)(b.a.mark((function e(t){var a,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==Object.keys(t).length){e.next=2;break}return e.abrupt("return",null);case 2:return a=t.name,n=t.email,e.prev=3,e.next=6,C.a.post("".concat("https://maint-log.herokuapp.com","/api/account"),{name:a,email:n});case 6:if(200!==(r=e.sent).status){e.next=9;break}return e.abrupt("return",R());case 9:throw console.log("Response received but with status code: "+r.status),new Error(r.error);case 14:return e.prev=14,e.t0=e.catch(3),console.log("Error posting to /api/account."),console.dir(e.t0),e.abrupt("return",Object(f.b)("Error updating account. Please try again."));case 19:case"end":return e.stop()}}),e,null,[[3,14]])})))).apply(this,arguments)}C.a.defaults.withCredentials=!0;var K=["ACG","Aston Martin","Blue","BMW","Buell","Bugatti","Chevrolet","Chrysler","Coachworks","Cooper","Daimler","E-One","Fiat","Ford","GM","Hino","Hombilt","Honda","Hyundai","International","Jaguar","Jialing","Kenworth","Kia","Lamborghini","Land Rover","Latitude","Lotus","Mack","Maserati","Mazda","Mercedes-Benz","Mills","Mitsubishi","NABI","Navistar","Nissan","NUMMI","Optima","Oshkosh","Owosso","PACCAR","Peterbilt","Peugot","Quest","Renault","Rolls Royce","Subaru","Suzuki","Tesla","Toyota","Volkswagen","Volvo"];a(91);var G=function(e){var t=Object(v.g)(),a=Object(n.useState)({email:e.user.name||"",password:"",persist:!1}),o=Object(I.a)(a,2),l=o[0],s=o[1],c=Object(n.useState)(!1),i=Object(I.a)(c,2),u=i[0],m=i[1];Object(n.useEffect)((function(){var e=localStorage.getItem("maint_log_username");e&&e.length>0&&s(Object(V.a)(Object(V.a)({},l),{},{email:e,persist:!0}))}),[]);var d=function(e){var t=e.target,a=t.value,n=t.name;s(Object(V.a)(Object(V.a)({},l),{},Object(k.a)({},n,a)))},p=function(){var a=Object(w.a)(b.a.mark((function a(n){var r,o,s,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),r=l.email,o=l.password,m(!0),l.persist&&l.email&&localStorage.setItem("maint_log_username",l.email),a.next=6,M(r,o);case 6:if((s=a.sent)&&void 0===s.response){a.next=11;break}return m(!1),Object(f.b)("Error logging in. Please try again. Status ".concat(s.response.status,": ").concat(s.response.statusText,".")),a.abrupt("return");case 11:if(c=s.user,console.log("Server returned user:"),console.log(c),0!==Object.keys(c).length){a.next=17;break}return Object(f.b)("Server could not locate that user. Please try again."),a.abrupt("return");case 17:return c.selectedVehicles&&void 0!==c.selectedVehicles||(c.selectedVehicles=[]),a.next=20,e.login(c);case 20:return m(!1),console.log("Loading set to false in Login component. Pushing history to /"),a.abrupt("return",t.push("/"));case 23:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return u?r.a.createElement(S,{message:"Logging in...",messages:["Logging in..."]}):r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Login"),r.a.createElement("form",{className:"padded",onSubmit:p,method:"POST"},r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email...",value:l.email||"",onChange:d,onBlur:function(e){l.persist&&l.email&&localStorage.setItem("maint_log_username",l.email)}}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password...",value:l.password||"",onChange:d}),r.a.createElement("button",{className:"button",type:"submit"},"Log In \u2192"),r.a.createElement("div",{className:"remember_box"},r.a.createElement("label",{htmlFor:"persist"},"Remember me"),r.a.createElement("input",{type:"checkbox",name:"persist",checked:l.persist,onChange:function(e){!l.persist&&l.email?localStorage.setItem("maint_log_username",l.email):localStorage.removeItem("maint_log_username"),s(Object(V.a)(Object(V.a)({},l),{},{persist:!l.persist}))}}))),r.a.createElement(F,{email:l.email||""}))};var Q=function(e){var t=Object(v.g)(),a=Object(n.useState)({name:"",email:"",password:"",passwordConfirm:""}),o=Object(I.a)(a,2),l=o[0],s=o[1],c=Object(n.useState)(!1),i=Object(I.a)(c,2),u=i[0],m=i[1],d=function(e){s(Object(V.a)(Object(V.a)({},l),{},Object(k.a)({},e.target.name,e.target.value)))},p=function(){var a=Object(w.a)(b.a.mark((function a(n){var r,o,s,c,i;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),console.log(l),r=l.name,o=l.email,s=l.password,c=l.passwordConfirm,m(!0),console.log("Loading. Sending to register: "),a.next=7,U(r,o,s,c);case 7:if((i=a.sent)&&void 0===i.response){a.next=11;break}return m(!1),a.abrupt("return",Object(f.b)("Error registering a new account. Please try again. Status ".concat(i.response.status,": ").concat(i.response.statusText,".")));case 11:if(0!==Object.keys(i.user).length){a.next=14;break}return m(!1),a.abrupt("return",Object(f.b)("Server was unable to register you at this time. Please try again."));case 14:return a.next=16,e.updateUserState(i.user);case 16:t.push("/");case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return u?r.a.createElement(S,{message:"Registering New User..."}):r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Register"),r.a.createElement("form",{className:"padded",onSubmit:p,method:"POST",encType:"multipart/form-data",multiple:"multiple"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",name:"name",placeholder:"Enter name...",value:l.name||"",onChange:d}),r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",name:"email",placeholder:"Enter email...",value:l.email||"",onChange:d}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password...",value:l.password||"",onChange:d}),r.a.createElement("label",{htmlFor:"passwordConfirm"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"Confirm password...",value:l.passwordConfirm||"",onChange:d}),r.a.createElement("button",{className:"button",type:"submit"},"Register \u2192")))};var X=function(){var e=Object(n.useState)("dark"),t=Object(I.a)(e,2),a=t[0],o=t[1];return Object(n.useEffect)((function(){var e=document.documentElement.className||localStorage.getItem("maint_log_theme");e&&o(e)}),[]),r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Theme Settings"),r.a.createElement("div",{className:"theme__container padded"},r.a.createElement("label",{htmlFor:"theme",className:""},"".concat(a.substring(0,1).toUpperCase()).concat(a.substring(1)," Mode Enabled")),r.a.createElement("button",{className:"button",onClick:function(e){e.preventDefault();var t="dark"===a?"light":"dark";localStorage.setItem("maint_log_theme",t),document.documentElement.className=t,o(t)}},"Switch Theme")))};a(92);var Z=function(e){return r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"welcome__guest__container"},r.a.createElement("section",{className:"welcome__guest__hero"},r.a.createElement("h3",null,"Keep track of the service history of your vehicles."),r.a.createElement("ul",null,r.a.createElement("li",null,"Record what was done, when, by whom, and where."),r.a.createElement("li",null,"Include photos of before and after the service, parts used, and receipts."),r.a.createElement("li",null,"Write short and long descriptions of work done."),r.a.createElement("li",null,"Recurring services can be scheduled for a future due date or mileage."))),r.a.createElement("p",null,r.a.createElement("strong",null,"Returning user? "),"Please login to access your log."),r.a.createElement(G,{login:e.login}),r.a.createElement("p",null,r.a.createElement("strong",null,"New user? "),"Register an account & start tracking your vehicle maintenance."),r.a.createElement(Q,{updateUserState:e.updateUserState}),r.a.createElement(X,null)))},ee=a(12),te=a(26),ae=a.n(te),ne=a(27),re=a.n(ne),oe=a(28),le=a.n(oe),se=a(29),ce=a.n(se),ie=a(30),ue=a.n(ie);a(94);var me=function(e){return console.log("Home page rendering with props:"),console.dir(e),r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"home__actions__container"},r.a.createElement(g.b,{className:"button card home__actions history",to:"/log"},r.a.createElement(ee.a,{src:ue.a,role:"img","aria-label":"Log Icon",fallback:function(){return r.a.createElement("img",{src:ue.a,alt:"log icon",description:"log icon",className:"svg"})}}),r.a.createElement("p",null,"View Full Maintenance Log History")),r.a.createElement(g.b,{className:"button card home__actions add",to:"/add"},r.a.createElement(ee.a,{src:re.a,role:"img","aria-label":"Add Icon",fallback:function(){return r.a.createElement("img",{src:re.a,alt:"add icon",description:"add icon",className:"svg"})}}),r.a.createElement("p",null,"Add New Log Entry")),r.a.createElement(g.b,{className:"button card home__actions todo upcoming-maintenance",to:"/todo"},r.a.createElement(ee.a,{src:le.a,role:"img","aria-label":"Todo Icon",fallback:function(){return r.a.createElement("img",{src:le.a,alt:"todo icon",description:"todo icon",className:"svg"})}}),r.a.createElement("p",null,"View Upcoming Scheduled Maintenance")),r.a.createElement(g.b,{className:"button card home__actions search__main search",to:"/search"},r.a.createElement(ee.a,{src:ae.a,role:"img","aria-label":"Search Icon",fallback:function(){return r.a.createElement("img",{src:ae.a,alt:"search icon",description:"search icon",className:"svg"})}}),r.a.createElement("p",null,"Search Log Entries")),r.a.createElement(g.b,{className:"button card home__actions settings",to:"/settings"},r.a.createElement(ee.a,{src:ce.a,role:"img","aria-label":"Settings Icon",fallback:function(){return r.a.createElement("img",{src:ce.a,alt:"settings icon",description:"settings icon",className:"svg"})}}),r.a.createElement("p",null,"Edit Your Vehicle & Account Settings"))))};a(50);var de=function(e){return console.log("Vehicle selector component with props: "),console.dir(e),r.a.createElement("div",{className:"card vehicles__selector vehicles"},r.a.createElement("div",null,r.a.createElement("h4",{className:"flexy vehicles__selector__header"},r.a.createElement("span",null,"Your Vehicles"),r.a.createElement("span",null,"Selected for View"))),(!e.allVehicles||0===e.allVehicles.length)&&r.a.createElement("span",null,"(none)"),e.allVehicles&&e.allVehicles.length>0&&e.allVehicles.map((function(t){return r.a.createElement("div",{key:t.id,className:"well vehicle"},r.a.createElement("p",null,t.year," ",t.make," ",t.model),r.a.createElement("input",{type:"checkbox",checked:e.vehiclesShowing.includes(t.id),name:t.id,onChange:e.changeVehiclesShowing}))})))};a(95);var pe=function(e){var t=e.data;return t?r.a.createElement("div",{className:"card log__entry"},r.a.createElement(g.b,{to:"/log/".concat(t.slug)},r.a.createElement("h4",null,t.name)),r.a.createElement("div",{className:"log__details__container"},r.a.createElement("div",{className:"log__details log__details__service"},r.a.createElement("p",null,t.shortDescription),r.a.createElement("p",null,t.serviceLocation)),r.a.createElement("div",{className:"log__details log__details__dates"},r.a.createElement("p",null,N()(t.dateCompleted).fromNow()),t.dateDue&&r.a.createElement("p",null,"Next ",r.a.createElement("span",null,N()(t.dateDue).fromNow()))),r.a.createElement("div",{className:"log__details log__details__mileage"},r.a.createElement("p",null,t.odometer&&Number(t.odometer).toLocaleString()," miles"),t.mileageDue&&r.a.createElement("p",null,"Next ",r.a.createElement("span",null,Number(t.mileageDue).toLocaleString()))),r.a.createElement("div",{className:"log__details log__details__costs"},r.a.createElement("p",null,"P $",t.partsCost),r.a.createElement("p",null,"L $",t.laborCost)))):r.a.createElement("div",null,"Error loading log data...")},he=a(17);a(96);var ge=function(e){function t(t,a){var n=a.target.childNodes[1];if(e&&e.user&&e.user.log&&!(e.user.log.length<=1)){if("date"===t){var r=[];new Date(e.user.log[0].dateCompleted).valueOf()>new Date(e.user.log[1].dateCompleted).valueOf()?(r=Object(he.a)(e.user.log).sort((function(e,t){return new Date(e.dateCompleted).valueOf()-new Date(t.dateCompleted).valueOf()})),n.classList.remove("log__sorter__arrow__selected")):(r=Object(he.a)(e.user.log).sort((function(e,t){return new Date(t.dateCompleted).valueOf()-new Date(e.dateCompleted).valueOf()})),n.classList.add("log__sorter__arrow__selected"));var o=Object(V.a)({},e.user);return o.log=r,void e.updateUserState(o)}if("service"===t){var l=[];e.user.log[0].name.localeCompare(e.user.log[1].name)>-1?(l=Object(he.a)(e.user.log).sort((function(e,t){return e.name.localeCompare(t.name)})),n.classList.add("log__sorter__arrow__selected")):(l=Object(he.a)(e.user.log).sort((function(e,t){return t.name.localeCompare(e.name)})),n.classList.remove("log__sorter__arrow__selected"));var s=Object(V.a)({},e.user);return s.log=l,void e.updateUserState(s)}if("mileage"===t){var c=[];Number(e.user.log[0].odometer)>Number(e.user.log[1].odometer)?(c=Object(he.a)(e.user.log).sort((function(e,t){return Number(e.odometer)<=Number(t.odometer)?-1:1})),n.classList.remove("log__sorter__arrow__selected")):(c=Object(he.a)(e.user.log).sort((function(e,t){return Number(e.odometer)<=Number(t.odometer)?1:-1})),n.classList.add("log__sorter__arrow__selected"));var i=Object(V.a)({},e.user);return i.log=c,void e.updateUserState(i)}if("costs"===t){var u=[];Number(e.user.log[0].partsCost)+Number(e.user.log[0].laborCost)>=Number(e.user.log[1].partsCost)+Number(e.user.log[1].laborCost)?(u=Object(he.a)(e.user.log).sort((function(e,t){return Number(e.partsCost)+Number(e.laborCost)<=Number(t.partsCost)+Number(t.laborCost)?-1:1})),n.classList.remove("log__sorter__arrow__selected")):(u=Object(he.a)(e.user.log).sort((function(e,t){return Number(e.partsCost)+Number(e.laborCost)<=Number(t.partsCost)+Number(t.laborCost)?1:-1})),n.classList.add("log__sorter__arrow__selected"));var m=Object(V.a)({},e.user);return m.log=u,void e.updateUserState(m)}}}return r.a.createElement("div",{className:"log__sorter__container"},r.a.createElement("div",{className:"log__sorter__item log__sorter__service"},r.a.createElement("span",{onClick:function(e){return t("service",e)}},"service ",r.a.createElement("span",{className:"log__sorter__arrow service__arrow"},"\u25b4"))),r.a.createElement("div",{className:"log__sorter__item log__sorter__dates"},r.a.createElement("span",{onClick:function(e){return t("date",e)}},"dates ",r.a.createElement("span",{className:"log__sorter__arrow date__arrow"},"\u25b4"))),r.a.createElement("div",{className:"log__sorter__item log__sorter__mileage"},r.a.createElement("span",{onClick:function(e){return t("mileage",e)}},"mileage ",r.a.createElement("span",{className:"log__sorter__arrow mileage__arrow"},"\u25b4"))),r.a.createElement("div",{className:"log__sorter__item log__sorter__costs"},r.a.createElement("span",{onClick:function(e){return t("costs",e)}},"costs ",r.a.createElement("span",{className:"log__sorter__arrow costs__arrow"},"\u25b4"))))};var ve=function(e){var t=Object(n.useState)([]),a=Object(I.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)([]),c=Object(I.a)(s,2),i=c[0],u=c[1];return Object(n.useEffect)((function(){var t=[];e.user.selectedVehicles.length>0?e.user.selectedVehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})):e.user.vehicles.length>0&&e.user.vehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})),console.log("Found initial vehicleShowing ID(s): "),console.log(t),l([].concat(t));var a=e.user.log.filter((function(e){return t.includes(e.vehicle)}));console.log("Found initial entries showing: "),console.log(a),u(a),console.log("After setup. Entries: "),console.log(i)}),[]),console.log("(After useEffect) Vehicles and Logs: "),console.log(o),console.log(i),r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Service History"),r.a.createElement(de,{allVehicles:e.user.vehicles,vehiclesShowing:o,changeVehiclesShowing:function(t){var a=t.target.name;console.log("Changing click status for vehicle id: ".concat(a,"."));var n=[];o.includes(a)?(console.log("current vehicles includes this vehicle ID already. Removing it."),n=o.filter((function(e){return e!==a}))):(console.log("current vehicles does not include this vehicle ID. Adding it."),(n=o).push(a)),console.log("Vehicle Updates queued: "),console.log(n),l(n),console.log("Updated which vehicles are displayed. vehiclesShowing state: "),console.log(o),console.log("Log entries updates queued: ");var r=e.user.log.filter((function(e){return n.includes(e.vehicle)}));console.log(r),u(r),console.log("Updated which log entries are displayed: "),console.log(i)}}),0===i.length&&r.a.createElement("div",{className:"card no__log"},r.a.createElement("h3",null,"No Log Entries Found!"),r.a.createElement("div",null,r.a.createElement("p",{className:"padded"},"No log entries for the vehicles selected. Please select more vehicles or add a new entry.")),r.a.createElement(g.b,{className:"button",to:"/add"},"Add A Log Entry Now")),i.length>0&&r.a.createElement("div",{className:"padded"},r.a.createElement(ge,e),i&&i.map((function(e){return r.a.createElement(pe,{key:e._id,data:e})}))))};var fe=function(){return console.log("unable to find a page associated with this route. redirecting to /welcome"),r.a.createElement(v.a,{to:"/welcome"})};var Ee=function(e){var t=Object(v.i)().token;console.log("Rendering password reset with token: "+t);var a=Object(v.g)();t||a.push("/welcome"),Object(n.useEffect)((function(){function e(){return(e=Object(w.a)(b.a.mark((function e(){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("posting to: ".concat("https://maint-log.herokuapp.com","/account/reset/").concat(t,"/confirm")),e.next=4,C.a.post("".concat("https://maint-log.herokuapp.com","/account/reset/").concat(t,"/confirm"));case 4:if(n=e.sent,console.log(n),console.dir(n),200!==n.status){e.next=9;break}return e.abrupt("return",!0);case 9:throw 404===n.status&&a.push("/welcome"),console.log("Response received but with status code: "+n.status),new Error(n.error);case 15:e.prev=15,e.t0=e.catch(0),console.log("Error posting to /account/reset/"+t+"/confirm"),console.dir(e.t0),a.push("/welcome");case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var o=Object(n.useState)({token:t,password:"",passwordConfirm:""}),l=Object(I.a)(o,2),s=l[0],c=l[1],i=Object(n.useState)(!1),u=Object(I.a)(i,2),m=u[0],d=u[1],p=function(e){c(Object(V.a)(Object(V.a)({},s),{},Object(k.a)({},e.target.name,e.target.value)))},h=function(){var t=Object(w.a)(b.a.mark((function t(n){var r,o,l,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=s.token,o=s.password,l=s.passwordConfirm,d(!0),console.log("Loading. Sending to /account/reset/:token "),console.log(r,o,l),t.next=7,T(r,o,l);case 7:if(c=t.sent,console.log(c),d(!1),c&&void 0===c.response){t.next=13;break}return Object(f.b)("Error resetting password. Please try again. Status ".concat(c.response.status,": ").concat(c.response.statusText,".")),t.abrupt("return");case 13:return t.next=15,e.updateUserState(c);case 15:a.push("/");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return m?r.a.createElement(S,{message:"Updating Your Password..."}):r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Password Reset"),r.a.createElement("form",{className:"padded",onSubmit:h,method:"POST",encType:"multipart/form-data",multiple:"multiple"},r.a.createElement("input",{type:"hidden",name:"token",value:t}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password...",value:s.password||"",onChange:p}),r.a.createElement("label",{htmlFor:"passwordConfirm"},"Confirm Password"),r.a.createElement("input",{type:"password",name:"passwordConfirm",placeholder:"Confirm password...",value:s.passwordConfirm||"",onChange:p}),r.a.createElement("input",{className:"button",type:"submit",value:"Reset Password \u2192"})))};var be=function(e){return r.a.createElement("section",{className:"search__results"},r.a.createElement("h4",null,"Results: "),r.a.createElement("div",null,e.results.map((function(e,t){return r.a.createElement("div",{key:e.id,className:"card search__result"},r.a.createElement("h3",null,e.name),r.a.createElement("p",{className:"result__detail"},e.shortDescription),r.a.createElement("div",{className:"search__result__buttons"},r.a.createElement(g.b,{to:"log/".concat(e.slug),className:"button"},"View"),r.a.createElement(g.b,{to:"log/".concat(e.id,"/edit"),className:"button"},"Edit")))}))))},_e=a(37),we=a.n(_e),ke=(a(97),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).getInfo=Object(w.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("".concat("https://maint-log.herokuapp.com","/api/search?q=").concat(n.state.query));case 3:(t=e.sent).data.length&&n.setState({results:t.data,searching:!1}),e.next=13;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log("Error posting to /api/search"),console.dir(e.t0),Object(f.b)("Error searching log data! Please try again."),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[0,7]])}))),n.handleInputChange=function(e){e.preventDefault(),n.setState({query:e.target.value,searching:!0,results:[]},(function(){n.state.query&&n.state.query.length>1&&Date.now()-n.state.counter>500?(n.getInfo(),n.setState({counter:Date.now()})):setTimeout((function(){n.getInfo()}),500)}))},n.blurCleanup=function(){0===n.state.query.length&&n.setState({results:[]})},n.clearInput=function(e){e.preventDefault(),n.setState({query:"",searching:!1,results:[]})},n.state={query:"",results:[],searching:!1,counter:0},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state.query&&this.state.query.length>0?r.a.createElement("strong",null,"\xd7"):r.a.createElement(ee.a,{src:we.a,role:"img","aria-label":"Magnifying Glass Icon",fallback:function(){return r.a.createElement("img",{src:we.a,alt:"magnifying glass icon",description:"magnifying glass icon",className:"svg"})}});return r.a.createElement("form",{className:"search__form"},r.a.createElement("div",{className:"search__input__container"},r.a.createElement("input",{placeholder:"Search parts, service, etc...",onKeyUp:this.handleInputChange,onChange:this.handleInputChange,onBlur:this.blurCleanup,value:this.state.query,className:"search__input"}),r.a.createElement("button",{className:"button search__button",onClick:this.clearInput},e)),this.state.loading&&r.a.createElement(S,{message:"Searching for: ".concat(this.state.query)}),this.state.results&&this.state.results.length>0&&r.a.createElement(be,{homepage:this.props.homepage,results:this.state.results}),0===this.state.results.length&&this.state.query.length>0&&r.a.createElement("h5",null,"No match found for that search..."))}}]),a}(r.a.Component));var ye=function(){return r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Search"),r.a.createElement("div",{className:"card"},r.a.createElement(ke,null)))};var Ne=function(e){var t=Object(v.g)(),a=Object(n.useState)(!1),o=Object(I.a)(a,2),l=o[0],s=o[1],c=function(){var a=Object(w.a)(b.a.mark((function a(n){var r;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.prev=1,a.next=4,C.a.post("".concat("https://maint-log.herokuapp.com","/api/logout"));case 4:if(200!==(r=a.sent).status){a.next=10;break}return e.updateUserState({name:"",userID:"",sessionID:"",cookies:"",email:"",log:[],vehicles:[],selectedVehicles:[]}),a.abrupt("return",t.push("/welcome"));case 10:throw new Error(r.error);case 12:a.next=18;break;case 14:a.prev=14,a.t0=a.catch(1),console.error(a.t0),Object(f.b)(a.t0);case 18:case"end":return a.stop()}}),a,null,[[1,14]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Disconnect Account and Logout"),r.a.createElement("div",{className:"logout__container padded"},r.a.createElement("button",{className:"button ".concat(l?"confirm--active":"confirm"),onClick:function(e){e.preventDefault(),s(!l)}},l?"Cancel Logout":"Logout"),l&&r.a.createElement("button",{className:"button disconnect",onClick:c},r.a.createElement("span",{className:"red"},"Confirm and Logout"))))};var Oe=function(e){var t=Object(n.useState)({name:e.user.name||"",email:e.user.email||"",password:""}),a=Object(I.a)(t,2),o=a[0],l=a[1],s=function(e){l(Object(V.a)(Object(V.a)({},o),{},Object(k.a)({},e.target.name,e.target.value)))},c=function(){var t=Object(w.a)(b.a.mark((function t(a){var n,r,l;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=Object(V.a)({},e.user)).name=o.name,n.email=o.email,t.next=6,J(n);case 6:return r=t.sent,console.log("1"),console.log("TODO why props.user instead of the extant userUpdates?"),(l=e.user).log=r.log,l.vehicles=r.vehicles,l.selectedVehicles=o.selectedVehicles,t.next=15,e.updateUserState(l);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Account"),r.a.createElement("form",{className:"padded",onSubmit:c,method:"POST"},r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",placeholder:"Enter name...",name:"name",value:o.name||"",onChange:s}),r.a.createElement("label",{htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",placeholder:"Enter email...",name:"email",value:o.email||"",onChange:s}),r.a.createElement("button",{className:"button",type:"submit"},"Save Account Changes")))},Ce=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleInputChange=function(e){n.setState({vin:e.target.value})},n.vinSearch=function(){var e=Object(w.a)(b.a.mark((function e(t){var a,r,o,l,s,c,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),t.preventDefault(),n.state.vin){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.setState({loading:!0});case 6:return e.prev=6,e.next=9,fetch("https://vpic.nhtsa.dot.gov/api/vehicles/decodevin/".concat(n.state.vin,"?format=json"));case 9:return a=e.sent,e.next=12,a.json();case 12:return r=e.sent,e.next=15,r.Results;case 15:o=e.sent,0===Number(o[4].Value[0])?(l=o[9].Value,s=o[6].Value,c=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase(),i=o[8].Value,n.setState({vehicle:{year:l,make:c,model:i},loading:!1})):n.setState({resultsError:'No Results Found for VIN "'.concat(n.state.vin,'". Please try again.'),loading:!1}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.error(e.t0);case 23:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}(),n.state={vin:"",resultsError:null,vehicle:{make:"",model:"",year:""},loading:!1},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement(S,{message:"Searching for VIN..."}):r.a.createElement("div",{className:"searchByVinDiv"},r.a.createElement("div",{className:"vinSearchInput"},r.a.createElement("label",{htmlFor:"vin"},"VIN"),r.a.createElement("input",{type:"text",name:"vin",value:this.state.vin,onChange:this.handleInputChange}),r.a.createElement("button",{className:"button",onClick:this.vinSearch},"Search For VIN")),r.a.createElement("div",{className:"vehicleResults"},this.state.resultsError&&r.a.createElement("span",null,this.state.resultsError),!this.state.resultsError&&this.state.vehicle&&this.state.vehicle.make.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h4",null,"Vehicle Found"),r.a.createElement("span",null,"Year: ".concat(this.state.vehicle.year)),r.a.createElement("span",null,"Make: ".concat(this.state.vehicle.make)),r.a.createElement("span",null,"Model: ".concat(this.state.vehicle.model)),r.a.createElement("button",{className:"button",onClick:function(){return e.props.saveNewVehicle(Object(V.a)({vin:e.state.vin},e.state.vehicle))}},"Add Vehicle To Account"))))}}]),a}(r.a.Component);var Se=function(e){var t=Object(n.useState)({year:e.year||"",make:e.make||"",model:e.model||"",vin:e.vin||"",odometer:e.odometer||0,primary:e.primary||!1,id:e._id||"",owner:e.owner||""}),a=Object(I.a)(t,2),o=a[0],l=a[1],s=function(e){l(Object(V.a)(Object(V.a)({},o),{},Object(k.a)({},e.target.name,e.target.value)))};return r.a.createElement("div",{className:"form manualVehicleEntryDiv"},r.a.createElement("label",{htmlFor:"year"},"Year"),r.a.createElement("input",{type:"number",name:"year",min:"1900",step:"1",value:o.year,onChange:s}),r.a.createElement("label",{htmlFor:"make"},"Make "),r.a.createElement("input",{type:"text",name:"make",value:o.make,onChange:s}),r.a.createElement("label",{htmlFor:"model"},"Model "),r.a.createElement("input",{type:"text",name:"model",value:o.model,onChange:s}),r.a.createElement("label",{htmlFor:"odometer"},"Latest Odometer Reading"),r.a.createElement("input",{type:"number",name:"odometer",min:"0",step:"0.1",value:o.odometer,onChange:s}),r.a.createElement("label",{htmlFor:"vin"},"VIN"),r.a.createElement("input",{type:"text",name:"vin",value:o.vin,onChange:s}),r.a.createElement("div",{className:"checkboxes__container"},r.a.createElement("label",{htmlFor:"primaryCheckbox"},"Main Vehicle"),r.a.createElement("input",{type:"checkbox",name:"primaryCheckbox",checked:o.primary,onChange:function(){l(Object(V.a)(Object(V.a)({},o),{},{primary:!o.primary}))}})),e.editing?r.a.createElement("button",{className:"button",onClick:function(){return e.saveVehicleChanges(o)}},"Save Vehicle Changes"):r.a.createElement("button",{className:"button",onClick:function(){return e.saveNewVehicle(o)}},"Add Vehicle To Account"))},je=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).handleSelectChange=function(){var e=Object(w.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n.setState(Object(k.a)({},t.target.name,t.target.value));case 3:if(n.state&&n.state.year&&n.state.make&&n.lookupModelsByYearAndMake(),!(n.state&&n.state.year&&n.state.make&&n.state.models&&n.state.model)){e.next=7;break}return e.next=7,n.setState({showConfirmButton:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={year:(new Date).getFullYear(),make:"",models:[],model:"",showConfirmButton:!1},n}return Object(c.a)(a,[{key:"lookupModelsByYearAndMake",value:function(){var e=Object(w.a)(b.a.mark((function e(){var t,a,n,r=this;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state&&this.state.year&&this.state.make){e.next=2;break}return e.abrupt("return",console.log("leaving lookup early due to no year or make selected..."));case 2:t=this.state.year.toString()+this.state.make.toString(),null!==(a=localStorage.getItem(t))?(console.log("Duplicate query. Retrieving cache from localStorage..."),n=a.split(","),console.log(n),this.setState({models:n,showConfirmButton:!1})):fetch("https://vpic.nhtsa.dot.gov/api/vehicles/getmodelsformakeyear/make/".concat(this.state.make,"/modelyear/").concat(this.state.year,"?format=json")).then(function(){var e=Object(w.a)(b.a.mark((function e(a){var n,o,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.json();case 2:n=e.sent,(o=n.Results).sort((function(e,t){return e.Model_Name>t.Model_Name?1:e.Model_Name<t.Model_Name?-1:0})),(l=o.map((function(e){return e.Model_Name}))).length>0&&localStorage.setItem(t,l),r.setState((function(e){return{models:Object(he.a)(l),showConfirmButton:!1}}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.error(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=(new Date).getFullYear();return r.a.createElement("div",{className:"form vehicleLookupDiv"},r.a.createElement("div",{className:"vehicleLookupInput"},r.a.createElement("label",{htmlFor:"year"},"Year"),r.a.createElement("select",{name:"year",defaultValue:t,onChange:this.handleSelectChange},Array.from(Array(t-1920).keys()).map((function(e,a){return r.a.createElement("option",{key:a,value:t-a},t-a)}))),r.a.createElement("label",{htmlFor:"make"},"Make"),r.a.createElement("select",{name:"make",defaultValue:"",onChange:this.handleSelectChange},r.a.createElement("option",{value:"",disabled:"disabled"},"Select a manufacturer..."),K.map((function(e,t){return r.a.createElement("option",{key:e,value:e},e)}))),r.a.createElement("label",{htmlFor:"model"},"Model"),r.a.createElement("select",{name:"model",defaultValue:"First select a make...",onChange:this.handleSelectChange},r.a.createElement("option",{value:"First select a make...",disabled:"disabled"},"First select a manufacturer..."),this.state.models.length>0&&this.state.models.map((function(e,t){return r.a.createElement("option",{key:e,value:e},e)})))),this.state.showConfirmButton&&r.a.createElement("button",{className:"button",onClick:function(){return e.props.saveNewVehicle(e.state)}},"Add Vehicle To Account"))}}]),a}(r.a.Component);var xe=function(e){console.log("loading vehicle settings with props:"),console.dir(e);var t=Object(v.g)(),a=Object(n.useState)(!1),o=Object(I.a)(a,2),l=o[0],s=o[1],c=Object(n.useState)(!1),i=Object(I.a)(c,2),u=i[0],m=i[1],d=Object(n.useState)(!1),p=Object(I.a)(d,2),g=p[0],E=p[1],_=Object(n.useState)(!1),y=Object(I.a)(_,2),N=y[0],O=y[1],j=Object(n.useState)({}),x=Object(I.a)(j,2),D=x[0],L=x[1],F=Object(n.useState)(!1),M=Object(I.a)(F,2),P=M[0],U=M[1],A=Object(n.useContext)(h),T=A.user,Y=A.updateUserState;Object(n.useEffect)((function(){if(e.vehicles&&e.vehicles.length>0){var t={};e.vehicles.forEach((function(e){t[e._id]=!1})),console.log("component mounting, initializing state for whether each individual vehicle is being edited or not"),console.log(t),0===Object.keys(D).length&&L(Object(V.a)({},t))}}),[e.vehicles,D]);var R=function(e){switch(s(!0),E(!1),m(!1),O(!1),e){case"showVinLookup":E(!0);break;case"showManualLookup":m(!0);break;case"showYearMakeModelLookup":O(!0);break;default:O(!0)}},B=function(){var e=Object(w.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),t.make=t.make||"",t.model=t.model||"",t.odometer=t.odometer||0,t.vin=t.vin||"",t.year=t.year||"",t.primary=t.primary||!1,delete t.models,delete t.showConfirmButton,e.next=11,q(t);case 11:return a=e.sent,n=Object(V.a)(Object(V.a)({},T),{},{log:a.log,vehicles:a.vehicles}),e.next=15,Y(Object(V.a)({},n));case 15:s(!1),U(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(w.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.id&&t.owner){e.next=2;break}return e.abrupt("return",new Error("Problem updating vehicle. Please try again."));case 2:return U(!0),t.make=t.make||"",t.model=t.model||"",t.odometer=t.odometer||0,t.vin=t.vin||"",t.year=t.year||"",t.primary=t.primary||!1,t._id=t.id,L(Object(V.a)(Object(V.a)({},D),{},Object(k.a)({},t._id,!D[t._id]))),e.next=13,W(t);case 13:return a=e.sent,n=Object(V.a)(Object(V.a)({},T),{},{log:a.log,vehicles:a.vehicles}),e.next=17,Y(Object(V.a)({},n));case 17:s(!1),U(!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(w.a)(b.a.mark((function e(a){var n,r,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",Object(f.b)("Unable to locate vehicle ID. Please try again."));case 2:return U(!0),console.log("Deleting vehicle: "+a),n="".concat("https://maint-log.herokuapp.com","/api/delete/vehicle/").concat(a),e.prev=5,e.next=8,C.a.post(n);case 8:if(r=e.sent,console.log("got results from delete vehicle post:"),console.dir(r),200!==r.status){e.next=21;break}return o=T.vehicles.filter((function(e){return e._id!==a})),console.log("Purged deleted vehicle. New vehicle list: "),console.log(o),delete T.vehicles,T.vehicles=Object(he.a)(o),e.next=19,Y(T);case 19:return U(!1),e.abrupt("return",t.push("/settings"));case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(5),console.error(e.t0),U(!1);case 27:case"end":return e.stop()}}),e,null,[[5,23]])})));return function(t){return e.apply(this,arguments)}}();return P?r.a.createElement(S,{message:"Loading/Updating Vehicle Settings..."}):r.a.createElement("div",{className:"card"},r.a.createElement("h3",null,"Vehicle".concat((e.vehicles&&e.vehicles.length)>1?"s":"")),r.a.createElement("div",null,e.vehicles&&e.vehicles.length>0&&e.vehicles.map((function(e){return r.a.createElement("div",{key:e._id,className:"".concat(e.primary?"vehicle__container padded primary":"vehicle__container padded")},r.a.createElement("h4",null,e.year,"\xa0",e.make,"\xa0",e.model),r.a.createElement("div",{className:"card vehicle__editor"},r.a.createElement("button",{className:D[e._id]?"button warn":"button",onClick:function(){return L(Object(V.a)(Object(V.a)({},D),{},Object(k.a)({},e._id,!D[e._id])))}},D[e._id]?"Close Editor Without Saving":"Edit"),D[e._id]&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Se,Object.assign({},e,{saveNewVehicle:B,saveVehicleChanges:H,editing:!0})),r.a.createElement("button",{className:"button delete delete__vehicle",onClick:function(){return $(e._id)}},"Permanently Delete Vehicle"))))}))),r.a.createElement("div",{className:"add__vehicle__container padded"},l&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"buttons__holder"},r.a.createElement("button",{className:"button",onClick:function(){return s(!1)}},"Hide Vehicle Search")),r.a.createElement("div",{className:"buttons__holder"},r.a.createElement("span",null,"Find Vehicle By:"),r.a.createElement("button",{className:"lookup__button ".concat(N?"lookup__selected":""),onClick:function(){return R("showYearMakeModelLookup")}},"Make & Model"),r.a.createElement("button",{className:"lookup__button ".concat(g?"lookup__selected":""),onClick:function(){return R("showVinLookup")}},"VIN"),r.a.createElement("button",{className:"lookup__button ".concat(u?"lookup__selected":""),onClick:function(){return R("showManualLookup")}},"Manually Enter")),r.a.createElement("div",{className:"lookupSwitcher"},g&&r.a.createElement(Ce,{currentVehicle:e.selectedVehicles&&e.selectedVehicles.length>0&&e.selectedVehicles[0]||{},saveNewVehicle:B}),N&&r.a.createElement(je,{currentVehicle:e.selectedVehicles&&e.selectedVehicles.length>0&&e.selectedVehicles[0]||{},saveNewVehicle:B}),u&&r.a.createElement(Se,{saveNewVehicle:B,saveVehicleChanges:H}))),!l&&r.a.createElement("div",{className:"buttons__holder"},r.a.createElement("button",{className:"button",onClick:function(){return s(!0)}},"Add A New Vehicle"))))};a(98);var De=function(e){var t=Object(v.g)();return r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Settings"),r.a.createElement("div",{className:"padded"},r.a.createElement(xe,{selectedVehicles:e.user.selectedVehicles,vehicles:e.user.vehicles,history:t}),r.a.createElement(Oe,{user:e.user,updateUserState:e.updateUserState}),r.a.createElement(X,null),r.a.createElement(Ne,{history:t,user:e.user,updateUserState:e.updateUserState})))},Le=a(38),Ve=a.n(Le);a(99);var Ie=function(e){var t=Object(v.i)().slug,a=e.user.log.filter((function(e){return e.slug===t})),n=a[0],o=n.id,l=n.shortDescription,s=n.longDescription,c=n.dateStarted,i=n.dateCompleted,u=n.dateEntered,m=n.dateDue,d=n.mileageDue,p=n.name,h=n.odometer,f=n.tools,E=n.parts,b=n.partsCost,_=n.laborCost,w=n.serviceLocation,k=n.photos,y=a[0].vehicle,O=e.user.vehicles.filter((function(e){return e.id===y}))[0];return r.a.createElement("div",{className:"inner"},r.a.createElement("div",{className:"card"},r.a.createElement("h2",null,p.length>120?"".concat(p.substring(0,120),"..."):p),r.a.createElement("div",{className:"padded single__details"},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Service Performed: "),r.a.createElement("span",null,l)),r.a.createElement("div",null,r.a.createElement("strong",null,"Date Entered: "),r.a.createElement("span",null,N()(u).format("MMM Do YYYY"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Vehicle: "),r.a.createElement("span",null,O.year," ",O.make," ",O.model," "," at "," ",h&&Number(h).toLocaleString()," "," miles"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Long Description: "),r.a.createElement("span",null,s)),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Started: "),r.a.createElement("span",null,N()(c).format("MMM Do YYYY"))),r.a.createElement("div",null,r.a.createElement("strong",null,"Completed: "),r.a.createElement("span",null,N()(i).format("MMM Do YYYY")))),r.a.createElement("div",null,(d||m)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Service is Due Next: "),r.a.createElement("span",null,d>0?"At ".concat(Number(d).toLocaleString()," miles. "):"[unset] miles. "," ",m&&N()(m).format("MMM Do YYYY")))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Tools: "),r.a.createElement("span",null,f)),r.a.createElement("div",null,r.a.createElement("strong",null,"Parts: "),r.a.createElement("span",null,E))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("strong",null,"Parts Cost: "),r.a.createElement("span",null,"$",b&&b.toLocaleString())),r.a.createElement("div",null,r.a.createElement("strong",null,"Labor Cost: "),r.a.createElement("span",null,"$",_&&_.toLocaleString()))),r.a.createElement("div",null,r.a.createElement("strong",null,"Service Location: "),r.a.createElement("span",null,w)),r.a.createElement(g.b,{className:"button editPencil",to:"/log/".concat(o,"/edit")},r.a.createElement(ee.a,{src:Ve.a,role:"img","aria-label":"Edit Pencil Icon",fallback:function(){return r.a.createElement("img",{src:Ve.a,alt:"edit pencil icon",description:"edit pencil icon",className:"svg"})}}),r.a.createElement("h5",null,"Edit")),k&&k.length>0&&r.a.createElement(j,{photos:k,editingBlocked:!0}))))};var Fe=function(e){var t=Object(n.useState)([]),a=Object(I.a)(t,2),o=a[0],l=a[1],s=Object(n.useState)([]),c=Object(I.a)(s,2),i=c[0],u=c[1];return Object(n.useEffect)((function(){var t=[];e.user.selectedVehicles.length>0?e.user.selectedVehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})):e.user.vehicles.length>0&&e.user.vehicles.forEach((function(e){void 0!==e&&e.id&&t.push(e.id)})),l([].concat(t));var a=e.user.log.filter((function(e){if(t.includes(e.vehicle)&&(null!==e.mileageDue||null!==e.dateDue))return e}));u(a)}),[]),r.a.createElement("div",{className:"inner"},r.a.createElement("h2",null,"Upcoming Service",Object.keys(i).length>1?"s":""),r.a.createElement(de,{allVehicles:e.user.vehicles,vehiclesShowing:o,changeVehiclesShowing:function(t){var a=t.target.name,n=[];o.includes(a)?n=o.filter((function(e){return e!==a})):(n=o).push(a),l(n);var r=e.user.log.filter((function(e){if(n.includes(e.vehicle)&&(null!==e.mileageDue||null!==e.dateDue))return e}));u(r)}}),0===i.length&&r.a.createElement("div",{className:"card no__todos padded"},r.a.createElement("h3",null,"No Future-Due Log Entries Found!"),r.a.createElement("div",null,r.a.createElement("p",{className:"padded"},"No log entries for the vehicles selected. Please select more vehicles or add a new entry.")),r.a.createElement(g.b,{className:"button",to:"/add"},"Add A Log Entry Now"),r.a.createElement(g.b,{className:"button",to:"/log"},"Review Your Log")),i.length>0&&r.a.createElement("div",{className:"padded"},r.a.createElement(ge,e),i&&i.map((function(e){return r.a.createElement(pe,{key:e._id,data:e})}))))};a(100);var Me=function(){return r.a.createElement("nav",{className:"nav"},r.a.createElement(g.c,{to:"/log",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(ee.a,{src:ue.a,role:"img",className:"svg__dark__fill","aria-label":"Log Icon",fallback:function(){return r.a.createElement("img",{src:ue.a,alt:"log icon",description:"log icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Log")),r.a.createElement(g.c,{to:"/add",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(ee.a,{src:re.a,role:"img",className:"svg__dark__fill","aria-label":"Add Icon",fallback:function(){return r.a.createElement("img",{src:re.a,alt:"add icon",description:"add icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Add")),r.a.createElement(g.c,{to:"/todo",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(ee.a,{src:le.a,role:"img",className:"svg__dark__fill","aria-label":"Todo Icon",fallback:function(){return r.a.createElement("img",{src:le.a,alt:"todo icon",description:"todo icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Todo")),r.a.createElement(g.c,{to:"/search",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(ee.a,{src:ae.a,role:"img",className:"svg__dark__fill","aria-label":"Search Icon",fallback:function(){return r.a.createElement("img",{src:ae.a,alt:"search icon",description:"search icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Search")),r.a.createElement(g.c,{to:"/settings",exact:!0,className:"card navLink",activeClassName:"navLink--active"},r.a.createElement(ee.a,{src:ce.a,role:"img",className:"svg__dark__fill","aria-label":"Settings Icon",fallback:function(){return r.a.createElement("img",{src:ce.a,alt:"settings icon",description:"settings icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h5",null,"Settings")))};var Pe=function(e){return e.isLoggedIn?r.a.createElement(v.b,e,e.children):r.a.createElement(v.a,{to:"/welcome"})};function Ue(){var e=Object(v.h)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null}var Ae=a(39),Te=a.n(Ae);a(101);var Ye=function(){return r.a.createElement(g.b,{to:"/",className:"siteTitle"},r.a.createElement(ee.a,{src:Te.a,role:"img","aria-label":"Home Icon",className:"svg",fallback:function(){return r.a.createElement("img",{src:Te.a,alt:"home icon",description:"home icon",className:"svg svg__dark__fill"})}}),r.a.createElement("h1",null,"Vehicle Maintenance Log"))};var Re=function(){return r.a.createElement(g.a,null,r.a.createElement(Ue,null),r.a.createElement(Ye,null),r.a.createElement(p,null,(function(e){var t=e.user,a=e.updateUserState,n=e.isLoggedIn,o=e.login,l=e.logout;return r.a.createElement("div",{className:"container"},r.a.createElement(f.a,{position:"top-center",autoClose:6500,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r.a.createElement(v.d,null,r.a.createElement(v.b,{path:"/welcome"},r.a.createElement(Z,{user:t,login:o,updateUserState:a})),r.a.createElement(Pe,{path:"/add",isLoggedIn:n},r.a.createElement(D,{user:t,updateUserState:a})),r.a.createElement(Pe,{path:"/log",exact:!0,isLoggedIn:n},r.a.createElement(ve,{user:t,updateUserState:a})),r.a.createElement(Pe,{path:"/log/:id/edit",exact:!0,isLoggedIn:n},r.a.createElement(L,{user:t,updateUserState:a})),r.a.createElement(Pe,{path:"/log/:slug",exact:!0,isLoggedIn:n},r.a.createElement(Ie,{user:t,updateUserState:a})),r.a.createElement(Pe,{path:"/search",isLoggedIn:n},r.a.createElement(ye,{user:t,updateUserState:a})),r.a.createElement(Pe,{path:"/settings",isLoggedIn:n},r.a.createElement(De,{user:t,updateUserState:a,logout:l})),r.a.createElement(Pe,{path:"/todo",isLoggedIn:n},r.a.createElement(Fe,{user:t,updateUserState:a})),r.a.createElement(Pe,{path:"/",exact:!0,isLoggedIn:n},r.a.createElement(me,{user:t,updateUserState:a})),r.a.createElement(v.b,{path:"/account/reset/:token",exact:!0},r.a.createElement(Ee,{updateUserState:a})),r.a.createElement(v.b,{path:"*"},r.a.createElement(fe,null))),n&&r.a.createElement(Me,null))})))},Be=(a(102),a(103),function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).logout=function(){localStorage.removeItem("maint_log_username"),e.setState({user:{name:"",userID:"",sessionID:"",cookies:"",email:"",log:[],vehicles:[],selectedVehicles:[]},isLoggedIn:!1})},e.login=function(t){e.saveUserToLocalStorage(t),e.setState({user:t,isLoggedIn:!0})},e.updateUserState=function(t){e.saveUserToLocalStorage(t),e.setState({user:t})},e.saveUserToLocalStorage=function(e){localStorage.setItem("maint_log_user",JSON.stringify(e))},e.state={user:{name:"",userID:"",sessionID:"",cookies:"",email:"",vehicles:[],log:[],selectedVehicles:[]},updateUserState:e.updateUserState,isLoggedIn:!1,login:e.login,logout:e.logout},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("maint_log_theme")||"dark";document.documentElement.className=e,localStorage.setItem("maint_log_theme",e);var t=localStorage.getItem("maint_log_user");if(console.log("User Raw:"),console.log(t),null!==t&&Object.keys(t).length>0&&""!==t.name&&t.name.length>0){var a=JSON.parse(t);console.log("Mounted App. Found Previously-Saved User:"),console.log(a),this.setState({user:a,isLoggedIn:!0})}else{var n=localStorage.getItem("maint_log_username");null!==n&&(console.log("Mounted App. Saved Username Found in LocalStorage."),this.setState({user:{name:n},isLoggedIn:!1}))}}},{key:"render",value:function(){var e={user:this.state.user,isLoggedIn:this.state.isLoggedIn,updateUserState:this.updateUserState,login:this.login,logout:this.logout};return r.a.createElement(d,{value:e},r.a.createElement(Re,null))}}]),a}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},26:function(e,t,a){e.exports=a.p+"static/media/search.fb5ad7c7.svg"},27:function(e,t,a){e.exports=a.p+"static/media/addLog.a918556d.svg"},28:function(e,t,a){e.exports=a.p+"static/media/todo.91e3307a.svg"},29:function(e,t,a){e.exports=a.p+"static/media/account.e5a41a1f.svg"},30:function(e,t,a){e.exports=a.p+"static/media/log.0476682c.svg"},37:function(e,t,a){e.exports=a.p+"static/media/magnifying.369e264b.svg"},38:function(e,t,a){e.exports=a.p+"static/media/editPencil.bd86eac2.svg"},39:function(e,t,a){e.exports=a.p+"static/media/home.d6ad0c97.svg"},50:function(e,t,a){},56:function(e,t,a){e.exports=a(104)},81:function(e,t,a){},82:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},92:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){}},[[56,1,2]]]);
//# sourceMappingURL=main.a74c1c69.chunk.js.map