{"version":3,"sources":["contexts/UserContext.js","components/Loading.js","components/PhotoEditor.js","components/log/LogForm.js","pages/Add.js","pages/Edit.js","components/account/ForgotPassword.js","helpers.js","components/account/Login.js","components/account/Register.js","components/account/ThemeSwitcher.js","pages/GuestHome.js","pages/Home.js","components/vehicle/VehiclesSelector.js","components/log/LogEntry.js","components/log/LogSorter.js","pages/Log.js","pages/NotFound.js","pages/PasswordReset.js","components/SearchResults.js","components/SearchBox.js","pages/Search.js","components/account/Logout.js","components/account/AccountSettings.js","components/vehicle/VLVin.js","components/vehicle/VLManual.js","components/vehicle/VLYMM.js","components/vehicle/VehicleSettings.js","pages/Settings.js","pages/SingleLogEntry.js","pages/Todo.js","components/Nav.js","components/account/ProtectedRoute.js","components/ScrollToTop.js","components/SiteTitle.js","AppRouter.js","App.js","serviceWorker.js","index.js","images/search.svg","images/addLog.svg","images/todo.svg","images/account.svg","images/log.svg","images/magnifying.svg","images/editPencil.svg","images/home.svg"],"names":["UserContext","React","createContext","UserProvider","Provider","UserConsumer","Consumer","Loading","props","message","className","charAt","toUpperCase","slice","PhotoEditor","photos","map","photo","length","key","src","alt","editingBlocked","to","onClick","deletePhoto","title","LogForm","handleInputChange","event","target","files","setState","file","name","value","apiEditLog","a","preventDefault","loading","url","log","process","id","formDatums","FormData","document","getElementById","append","moment","Date","now","format","state","console","x","axios","post","result","status","data","fullLog","newLogEntry","user","updateUserState","history","push","slug","Error","error","dir","table","toast","toggleDeleteButton","showDeleteButton","deleteLogEntry","updatedLog","filter","entry","pathname","_id","alignViewToElement","scrollIntoView","block","inline","behavior","shortDescription","longDescription","dateStarted","dateCompleted","dateEntered","dateDue","mileageDue","odometer","tools","parts","partsCost","laborCost","serviceLocation","receipts","vehicle","api","this","selectedVehicles","undefined","vehicles","substring","onSubmit","method","encType","multiple","htmlFor","type","autoFocus","onChange","onFocus","required","defaultValue","model","year","make","min","step","autoComplete","spellCheck","accept","Component","Add","useHistory","Edit","useParams","ForgotPassword","useState","formDisplayed","toggleFormDisplay","setLoading","inputRef","createRef","handleSubmit","current","email","response","placeholder","ref","apiLogin","password","userID","primaryVehicleArray","car","primary","register","passwordConfirm","resetPassword","token","getLogData","get","addVehicle","updateVehicle","updateUserAccount","userObject","Object","keys","defaults","withCredentials","manufacturers","Login","persist","useEffect","localStorage","getItem","handleLogin","setItem","statusText","login","messages","onBlur","checked","removeItem","Register","handleRegister","ThemeSwitcher","currentTheme","changeTheme","savedTheme","documentElement","newTheme","GuestHome","Home","LogIcon","role","aria-label","fallback","description","AddIcon","TodoIcon","SearchIcon","SettingsIcon","VehiclesSelector","allVehicles","vehiclesShowing","includes","changeVehiclesShowing","LogEntry","fromNow","Number","toLocaleString","LogSorter","sortBy","arrow","childNodes","tempLogArray","valueOf","sort","first","second","classList","remove","add","updatedUser","localeCompare","e","Log","entriesShowing","changeEntriesShowing","veh","forEach","ent","logEntry","clickedOnVehicleId","vehicleUpdates","vehicleId","logUpdates","NotFound","PasswordReset","checkValidity","handleReset","SearchResults","results","index","SearchBox","getInfo","query","searching","counter","setTimeout","blurCleanup","clearInput","buttonImg","MagnifyingGlassIcon","onKeyUp","homepage","Search","Logout","showLogoutButton","toggleShowLogoutButton","apiLogout","sessionID","cookies","AccountSettings","saveAccountChanges","userUpdates","updates","VLVin","vin","vinSearch","stopPropagation","fetch","json","rawMake","toLowerCase","resultsError","saveNewVehicle","VLManual","owner","editing","saveVehicleChanges","VLYMM","handleSelectChange","lookupModelsByYearAndMake","models","showConfirmButton","getFullYear","localStorageKey","toString","localStorageModels","localStorageModelsArray","split","then","b","modelsArray","prevState","catch","err","thisYear","Array","from","item","i","disabled","val","idx","VehicleSettings","vehicleLookupsShowing","showVehicleLookups","manualLookupShowing","showManualLookup","vinLookupShowing","showVinLookup","yearMakeModelLookupShowing","showYearMakeModelLookup","vehiclesEditing","changeVehicleEditStatus","useContext","transform","vehicleLookupChanger","view","newLogVehicleArrays","newUser","deleteVehicle","newVehicleList","currentVehicle","Settings","SingleLogEntry","vehicleID","_vehicle","EditPencil","Todo","Nav","exact","activeClassName","ProtectedRoute","isLoggedIn","children","ScrollToTop","useLocation","window","scrollTo","SiteTitle","AppRouter","logout","position","autoClose","hideProgressBar","newestOnTop","closeOnClick","pauseOnFocusLoss","draggable","pauseOnHover","path","App","saveUserToLocalStorage","JSON","stringify","preferredTheme","userRaw","parse","username","context","Boolean","location","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.f155b245.chunk.js","sourcesContent":["import React from 'react'\n\nconst UserContext = React.createContext()\n\nexport const UserProvider = UserContext.Provider\nexport const UserConsumer = UserContext.Consumer\n\nexport default UserContext","import React from 'react'\nimport PropTypes from 'prop-types'\n// import { CSSTransition } from 'react-transition-group'\n\nimport '../styles/loading.css'\n\nfunction Loading(props) {\n  if (!props || !props.message) return null\n\n  return (\n    <div className=\"loading\">{props.message.charAt(0).toUpperCase() + props.message.slice(1)}</div>\n  )\n}\n\nLoading.propTypes = {\n  message: PropTypes.string.isRequired\n}\n\nexport default Loading","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport '../styles/photoEditor.css'\n\nfunction PhotoEditor(props) {\n  return (\n    <>\n      <h3 className=\"photos__header\">Photos</h3>\n      <div className=\"photos__div\">\n        { props.photos.map(photo => {\n          if (photo === \"\" || photo.length === 0) return null\n          return (\n            <div key={photo} className=\"single__photo__div\">\n              <img className=\"single__photo\" src={`http://res.cloudinary.com/c00p/image/upload/${photo}`} alt={photo} />\n              { !props.editingBlocked && <Link className=\"button delete__photo\" to={`/delete/photo/${photo}`} onClick={props.deletePhoto} title=\"Delete This Photo\">Delete Photo</Link> }\n            </div>\n          )\n        }\n        )}\n      </div>\n    </>\n  )\n}\n\nPhotoEditor.propTypes = {\n  photos: PropTypes.array.isRequired,\n  editingBlocked: PropTypes.bool,\n  deletePhoto: PropTypes.func // called from SingleLogEntry is read-only, called from LogForm via Edit Page this func is passed\n}\n\nexport default PhotoEditor","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\nimport moment from 'moment'\nimport axios from 'axios'\nimport { toast } from 'react-toastify'\n\nimport Loading from '../Loading'\nimport PhotoEditor from '../PhotoEditor' \n// axios.defaults.withCredentials = true\n\nclass LogForm extends React.Component {\n  constructor(props) {\n    super(props) \n    this.state = {\n      id: '', \n      shortDescription: '',  \n      longDescription: '', \n      dateStarted: '', \n      dateCompleted: '', \n      dateEntered: '', \n      dateDue: '', \n      file: '',\n      mileageDue: '', \n      name: '', \n      odometer: '', \n      tools: '', \n      parts: '', \n      partsCost: '', \n      laborCost: '', \n      serviceLocation: '', \n      photos: [], \n      receipts: '',\n      vehicle: '', // String vehicle ID associated with this log entry\n      showDeleteButton: false,\n      loading: true,\n      api: true\n    }\n  }\n\n  handleInputChange = event => {\n    // when a file is selected for upload...\n    if (event.target.files) return this.setState({ file: event.target.files[0] })\n    // otherwise track changes in form data to state\n    this.setState({ [event.target.name]: event.target.value })\n  }\n\n  apiEditLog = async event => {\n    // console.log('apiEditLog func...')\n    event.preventDefault()\n    this.setState({ loading: true })\n    let url = ''\n    // can post new and edit existing log entries via this form\n    if (this.props && this.props.log) {\n      url = `${process.env.REACT_APP_API_DOMAIN}/add/${this.props.log.id}`\n    } else {\n      url = `${process.env.REACT_APP_API_DOMAIN}/add`\n    }\n\n    const formDatums = new FormData(document.getElementById('logForm'))\n    formDatums.append(\"dateEntered\", moment(Date.now()).format('YYYY-MM-DD'))\n    formDatums.append(\"api\", true)\n    if (this.props.log && this.props.log.photos && this.props.log.photos.length > 0) {\n      formDatums.append(\"photos\", this.props.log.photos)\n    } else {\n      formDatums.append(\"photos\", [])\n    }\n    if (this.state.id) formDatums.append(\"id\", this.state.id)\n    console.log('FORM DATA before posting:')\n    for (let x of formDatums) console.log(formDatums[x],x)\n\n    try {\n      const result = await axios.post(url, formDatums)\n      console.log('result received')\n      console.log(result)\n      if (result.status === 200) {\n        const log = result.data.fullLog\n        const newLogEntry = result.data.newLogEntry\n        const user = this.props.user\n        user.log = log\n        this.props.updateUserState(user)\n        this.props.history.push(`/log/${newLogEntry.slug}`)\n      } else {\n        console.log('Response received but with status code: '+result.status)\n        const error = new Error(result.error)\n        throw error\n      }\n    } catch(error) {\n      console.log('Error with LogForm. Unable to add/edit Log Entry. Please try again later.')\n      console.dir(error)\n      console.log(error)\n      console.table(error)\n      this.setState({ loading: false })\n      toast(error)\n      // TODO redirect? try again?\n    }\n  }\n\n  toggleDeleteButton = async () => {\n    this.setState({ showDeleteButton: !this.state.showDeleteButton })\n  }\n\n  deleteLogEntry = async event => {\n    event.preventDefault()\n    await this.setState({ loading: true })\n    try {\n      const result = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/delete/log/entry/${this.state.id}`)\n      if (result.data === null) {\n        console.log('Server unable to find specified log entry. Was it already deleted?')\n        await this.setState({ loading: false })\n      } else if (result.status === 200) {\n        // update State to remove the deleted entry\n        const updatedLog = this.props.user.log.filter(entry => entry.id !== this.state.id)\n        const user = this.props.user\n        user.log = updatedLog\n        await this.props.updateUserState(user)\n        // redirect back to the log page\n        this.props.history.push('/log')\n      }\n    } catch(err) {\n      console.error(err)\n      await this.setState({ loading: false })\n    }\n  }\n\n  deletePhoto = async event => {\n    event.preventDefault()\n    // await this.setState({ loading: true })\n    // backend DOMAIN is localhost or hosted (with no trailing slash)\n    // event.target.pathname: /delete/photo/:photo-filename (with a leading slash)\n    // backend expects: DOMAIN/delete/photo/:photo-filename\n    const url = `${process.env.REACT_APP_API_DOMAIN}${event.target.pathname}`\n    // console.log('Deleting photo via: '+url)\n    try {\n      const result = await axios.post(url)\n      // console.log('Result from delete photo call:')\n      // console.dir(result)\n      if (result.data === null) {\n        console.log('Server unable to find specified photo to delete. Was it already deleted?')\n        // await this.setState({ loading: false })\n      } else if (result.status === 200) {\n        // update State to remove the deleted entry\n        const user = this.props.user\n        user.log = result.data\n        this.props.updateUserState(user)\n        this.props.history.push(`/log/${this.props.log._id}/edit`)\n        // await this.setState({ loading: false })\n      }\n    } catch(err) {\n      // await this.setState({ loading: false })\n      toast('Problem deleting photo. Please try again.')\n      console.error(err)\n    }\n  }\n\n  componentDidMount() {\n    if (!this.props) return this.setState({ loading: false })\n    if (!this.props.log) return this.setState({ loading: false })\n\n    // console.log('Editing extant Log entry. Initializing state. ')\n    let dateStarted = ''\n    let dateCompleted = ''\n    let dateEntered = ''\n    let dateDue = ''\n    // convert mongodb timestamp to something usable by an html input of type=date, \n    // eg: 2018-01-30T00:00:00.000Z => 2018-01-30\n    if (this.props.log.dateStarted) dateStarted = moment(this.props.log.dateStarted).format('YYYY-MM-DD')\n    if (this.props.log.dateCompleted) dateCompleted = moment(this.props.log.dateCompleted).format('YYYY-MM-DD')\n    if (this.props.log.dateEntered) dateEntered = moment(this.props.log.dateEntered).format('YYYY-MM-DD')\n    if (this.props.log.dateDue) dateDue = moment(this.props.log.dateDue).format('YYYY-MM-DD')\n\n    this.setState({\n      id: this.props.log.id, \n      shortDescription: this.props.log.shortDescription, \n      longDescription: this.props.log.longDescription, \n      dateStarted: dateStarted, \n      dateCompleted: dateCompleted, \n      dateEntered: dateEntered, \n      dateDue: dateDue, \n      mileageDue: this.props.log.mileageDue || '', \n      name: this.props.log.name, \n      odometer: this.props.log.odometer, \n      tools: this.props.log.tools, \n      parts: this.props.log.parts, \n      partsCost: this.props.log.partsCost, \n      laborCost: this.props.log.laborCost, \n      serviceLocation: this.props.log.serviceLocation, \n      receipts: this.props.log.receipts,\n      vehicle: this.props.log.vehicle, \n      selectedVehicles: (this.props.user.selectedVehicles && this.props.user.selectedVehicles.length > 0 && this.props.user.selectedVehicles[0] !== undefined && this.props.user.selectedVehicles) || this.props.user.vehicles,\n      loading: false\n    })\n  }\n\n  alignViewToElement = event => {\n    event.preventDefault()\n    event.target.scrollIntoView({block: \"center\", inline: \"nearest\", behavior: \"smooth\" })\n  }\n\n  render() {\n    if (this.state.loading) return <Loading message=\"Formatting and Saving Log Changes...\" />\n\n    if (!this.props.user.vehicles || this.props.user.vehicles.length < 1 || (this.props.user.vehicles.length > 0 && this.props.user.vehicles[0] === undefined)) {\n      return (\n        <div className=\"inner\">\n          <h2>No Vehicle Associated With This Account</h2>\n          <div className=\"card no__vehicle warning\">\n            <span>Before entering a service record, please: </span>\n            <Link to=\"/settings\" className=\"button\">Click Here To Add A Vehicle To Your Account</Link>\n          </div>\n        </div>\n      )\n    } else {\n      return (\n        <div className=\"inner\">\n          <h2>\n            {this.state.id ? \n              <span>Editing \n                <Link to={`/log/${this.props.log.slug}`}> \n                  {this.state.name.length > 120 ? ` ${this.state.name.substring(0,120)}... ` : ` ${this.state.name} ` }\n                </Link>\n              </span>\n              :\n              `Add New Log Entry`}\n          </h2>\n\n          <div className=\"card padded\">\n            <form className=\"form\" id=\"logForm\" onSubmit={this.apiEditLog} method=\"POST\" encType=\"multipart/form-data\" multiple=\"multiple\">\n              <label htmlFor=\"name\">Name</label>\n              <input type=\"text\" name=\"name\" autoFocus value={this.state.name} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"vehicle\">Vehicle</label>\n              <select \n                id=\"vehicle\" \n                name=\"vehicle\" \n                required=\"required\" \n                defaultValue=\"Please select a vehicle...\"\n                onChange={this.handleInputChange} >\n                { this.props.user.vehicles && this.props.user.vehicles.length > 0 &&\n                  this.props.user.vehicles.map(model => <option key={model._id} value={model._id}>{`${model.year} ${model.make} ${model.model}`}</option>)\n                }\n              </select>\n              <label htmlFor=\"dateStarted\">Date Started</label>\n              <input type=\"date\" name=\"dateStarted\" value={this.state.dateStarted} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"dateCompleted\">Date Completed</label>\n              <input type=\"date\" name=\"dateCompleted\" value={this.state.dateCompleted} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"dateDue\">On what date will this item need to be completed next?</label>\n              <input type=\"date\" name=\"dateDue\" value={this.state.dateDue} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"mileageDue\">At what mileage will this item need to be completed next?</label>\n              <input type=\"number\" name=\"mileageDue\" min=\"0\" step=\"1\" value={this.state.mileageDue} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"shortDescription\">Short Description</label>\n              <textarea name=\"shortDescription\" autoComplete=\"on\" spellCheck=\"true\" value={this.state.shortDescription} onChange={this.handleInputChange} onFocus={this.alignViewToElement} ></textarea>\n              <label htmlFor=\"longDescription\">Long Description</label>\n              <textarea name=\"longDescription\" autoComplete=\"on\" spellCheck=\"true\" value={this.state.longDescription} onChange={this.handleInputChange} onFocus={this.alignViewToElement} ></textarea>\n              <label htmlFor=\"tools\">Tools</label>\n              <input type=\"text\" name=\"tools\" value={this.state.tools} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"parts\">Parts</label>\n              <input type=\"text\" name=\"parts\" value={this.state.parts} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"partsCost\">Cost of Parts</label>\n                <span className=\"moneySign\">$\n                  <input className=\"moneyInput\" type=\"number\" name=\"partsCost\" min=\"0\" step=\"0.01\" value={this.state.partsCost} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n                </span>\n              <label htmlFor=\"laborCost\">Cost of Labor</label>\n              <span className=\"moneySign\">$\n                <input className=\"moneyInput\" type=\"text\" name=\"laborCost\" min=\"0\" step=\"0.01\" value={this.state.laborCost} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              </span>\n              <label htmlFor=\"serviceLocation\">Service Location (Name and Address of Mechanic or Self)</label>\n              <input type=\"text\" name=\"serviceLocation\" value={this.state.serviceLocation} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n              <label htmlFor=\"odometer\">Odometer</label>\n              <input type=\"number\" name=\"odometer\" min=\"0\" value={this.state.odometer} onChange={this.handleInputChange} onFocus={this.alignViewToElement} />\n\n              <label htmlFor=\"file\">Upload other images\n                <input type=\"file\" name=\"file\" accept=\"image/gif, image/png, image/jpeg\" onChange={this.handleInputChange} />\n              </label>\n\n              <button className=\"button submit\" type=\"submit\">Save Log</button>\n            </form>\n\n            { this.props.log && this.props.log.photos && this.props.log.photos.length > 0 && <PhotoEditor photos={this.props.log.photos} deletePhoto={this.deletePhoto} /> }\n\n            { this.state.id &&\n              <>\n              <button className=\"button delete__log__entry\" onClick={this.toggleDeleteButton} title=\"Delete Log Entry\">Delete Log Entry</button>\n              { this.state.showDeleteButton &&\n                <button className=\"button delete__log__entry__confirm\" onClick={this.deleteLogEntry} title=\"Permanently Delete Log Entry\">Permanently Delete Log Entry</button>\n              }\n              </>\n            }\n          </div>\n        </div>\n      )\n    }\n  }\n}\n\nLogForm.propTypes = {\n  log: PropTypes.object, // optional: extant log to edit can be passed otherwise blank new log form\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n  updateUserState: PropTypes.func.isRequired,\n  history: PropTypes.object.isRequired\n}\n\nexport default LogForm","import React from 'react'\nimport PropTypes from 'prop-types'\nimport LogForm from '../components/log/LogForm'\nimport { useHistory } from 'react-router-dom'\n\nfunction Add(props) {\n  const history = useHistory()\n  return <LogForm {...props} history={history} />\n}\n\nAdd.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array \n  }),\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default Add","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory, useParams } from 'react-router-dom'\n\nimport LogForm from '../components/log/LogForm'\n\nfunction Edit(props) {\n  const history = useHistory()\n  const { id } = useParams()\n  // find the log entry that matches the ID from the URL parameter...\n  const log = props.user.log.filter(entry => entry.id === id)\n  return <LogForm {...props} log={log[0]} history={history} />\n}\n\nEdit.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default Edit\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport { toast } from 'react-toastify'\n\nimport Loading from '../Loading'\nimport '../../styles/forgotPassword.css'\n\nfunction ForgotPassword(props) {\n  const [formDisplayed, toggleFormDisplay] = useState(false)\n  const [loading, setLoading] = useState(false)\n  const inputRef = React.createRef()\n\n  const handleSubmit = async event => {\n    event.preventDefault()\n    console.log('Forgot password form submitted.')\n    console.log(inputRef.current.value)\n    const email = inputRef.current.value\n    if (!email || email.length < 1) return toast('Please enter a valid email before attempting to request a password reset.')\n    setLoading(true)\n    try {\n      console.log(`posting to: ${process.env.REACT_APP_API_DOMAIN}/account/forgot`)\n      const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/account/forgot`, {\"email\": email} )\n      console.log(response)\n      console.dir(response)\n      setLoading(false)\n      if (response.status === 200) return toast('Password reset requested successfully. Please check your email soon.')\n      console.log('Response received but with status code: '+response.status)\n      const error = new Error(response.error)\n      throw error\n    } catch(err) {\n      console.log('Error posting to /account/forgot')\n      console.dir(err)\n      return toast(err)\n    }\n\n  }\n\n  if (loading) return <Loading message=\"Sending password reset email...\" />\n  if (!formDisplayed) return <div className=\"padded\"><button className=\"button\" onClick={() => toggleFormDisplay(true)}>Forgot Your Password?</button></div> \n\n  if (formDisplayed) return ( \n    <div className=\"forgot__password__container padded\">\n      <button className=\"button close__button\" onClick={() => toggleFormDisplay(false)}>&times;</button> \n      <h3>I forgot my password!</h3>\n      <form onSubmit={handleSubmit} method=\"POST\">\n        <label htmlFor=\"email\">Email Address</label>\n        <input type=\"email\" name=\"email\" placeholder=\"Enter email...\" defaultValue={props.email} ref={inputRef} />\n        <button className=\"button\" type=\"submit\" >Send a Reset</button>\n      </form>\n    </div>\n  )\n}\n\nForgotPassword.propTypes = {\n  email: PropTypes.string.isRequired\n}\n\nexport default ForgotPassword\n","import { toast } from 'react-toastify'\nimport axios from 'axios'\naxios.defaults.withCredentials = true\n\n// Authenticates a user via email+password\n// Upon success: returns a User object and \n// appends server session ID and cookie info to future requests\nexport async function apiLogin(email, password) {\n  if (!email || !password) return new Error('No email or password provided to Login.')\n  try {\n    const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/api/login`, { email, password })\n    if (response.status === 200) {\n      const user = response.data\n      user.userID = response.data._id\n      // object property \"primary\" is a boolean indicating if it is the default/main vehicle to display\n      const primaryVehicleArray = user.vehicles.filter(car => car.primary)\n      if (primaryVehicleArray.length === 0) {\n        user.selectedVehicles = [user.vehicles[0]] // if none is primary, display the first vehicle by default\n      } else {\n        user.selectedVehicles = primaryVehicleArray\n      }\n      return { user } \n    } else {\n      console.log('Response received but with status code: '+response.status)\n      const error = new Error(response.error)\n      throw error\n    }\n  } \n  catch(loginError) {\n    console.log(`Error posting to ${process.env.REACT_APP_API_DOMAIN}/api/login`)\n    console.dir(loginError)\n    return loginError\n  }\n}\n\n// Register a new user account\n// Returns user and session data (id, cookie) for a newly-created account\nexport async function register(name, email, password, passwordConfirm) {\n  if (!name || !email || !password || !passwordConfirm) return new Error('Not all registration information provided. Please make sure you have entered a username, email address, password, and confirmed your password before trying again.')\n  const url = `${process.env.REACT_APP_API_DOMAIN}/api/register`\n  try {\n    const response = await axios.post(url, { name, email, password, passwordConfirm })\n    if (response.status === 200) {\n      const user = response.data\n      user.userID = response.data._id\n      user.selectedVehicles = []\n      user.vehicles = []\n      user.log = []\n      return { user }\n    } else {\n      console.log('Registration response received from the server but with an error and status code: '+response.status)\n      const error = new Error(response.error)\n      throw error\n    }\n  } \n  catch(registrationError) {\n    console.log(`Error posting to ${process.env.REACT_APP_API_DOMAIN}/api/register`)\n    console.log(registrationError.response.status)\n    return registrationError\n  }\n}\n\nexport async function resetPassword(token, password, passwordConfirm) {\n  try {\n    const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/account/reset/${token}`, { token, password, passwordConfirm })\n    // ensure the selectedVehicles array is included in the dataset\n    if (!response || !response.data || !response.data.selectedVehicles || response.data.selectedVehicles === undefined) response.data.selectedVehicles = []\n    if (response.status === 200) return response.data\n    console.log('Response received but with status code: '+response.status)\n    const error = new Error(response.error)\n    throw error\n  } catch(err) {\n    console.log('Error posting to /account/reset.')\n    console.dir(err)\n    // TODO error boundary - return false\n    return toast('Error resetting account password. Please try again.')\n  }\n}\n\n// Gets all log and vehicle info for the logged-in user\n// Returns a User's Log and Vehicle arrays\nexport async function getLogData() {\n  // console.log('Getting new log data...')\n  try {\n    const response = await axios.get(`${process.env.REACT_APP_API_DOMAIN}/api/log`)\n    console.log('getLogData returned: ')\n    console.dir(response)\n    if (response.status === 200) return response.data\n    // otherwise ERROR\n    console.log('Response received but with status code: '+response.status)\n    const error = new Error(response.error)\n    throw error\n  } catch (err) {\n      console.log('Error getting data from /api/log/')\n      console.dir(err)\n      toast('Error getting log data please try again')\n    }\n}\n\n// Save a new Vehicle and associate this with the logged-in user\n// If successful, calls getLogData and returns the updated Log/Vehicle arrays\nexport async function addVehicle(vehicle) {\n  try {\n    const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/api/vehicle/add`, vehicle)\n    if (response.status === 200) return getLogData()\n    console.log('Response received but with status code: '+response.status)\n    const error = new Error(response.error)\n    throw error\n  } catch(err) {\n    console.log('Error posting to /api/vehicle/add.')\n    console.dir(err)\n    // TODO error boundary - return false\n    return toast('Error adding new vehicle. Please try again.')\n  }\n}\n\n// saveVehicleChanges, post route = /api/vehicle\nexport async function updateVehicle(vehicle) {\n  console.log(\"Updating an extant vehicle: \")\n  console.dir(vehicle)\n  try {\n    const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/api/vehicle`, vehicle)\n    if (response.status === 200) return getLogData()\n    console.log('Response received but with status code: '+response.status)\n    const error = new Error(response.error)\n    throw error\n  } catch(err) {\n    console.log('Error posting to /api/vehicle.')\n    console.dir(err)\n    // TODO error boundary - return false\n    return toast('Error updating vehicle. Please try again.')\n  }\n}\n\n// Sends account changes (user name, email address, password) to the back end\n// If successful, calls getLogData and returns the updated Log/Vehicle arrays\nexport async function updateUserAccount(userObject) {\n  if (!userObject || Object.keys(userObject).length === 0) return null\n  const { name, email } = userObject\n  try {\n    const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/api/account`, { name, email })\n    if (response.status === 200) return getLogData()\n    // otherwise ERROR\n    console.log('Response received but with status code: '+response.status)\n    const error = new Error(response.error)\n    throw error\n  } catch(err) {\n      console.log('Error posting to /api/account.')\n      console.dir(err)\n      // TODO error boundary\n      return toast('Error updating account. Please try again.')\n    }\n}\n\n//\nexport const manufacturers = [\n  \"ACG\",\n  \"Aston Martin\",\n  \"Blue\",\n  \"BMW\",\n  \"Buell\",\n  \"Bugatti\",\n  \"Chevrolet\",\n  \"Chrysler\",\n  \"Coachworks\",\n  \"Cooper\",\n  \"Daimler\",\n  \"E-One\",\n  \"Fiat\",\n  \"Ford\",\n  \"GM\",\n  \"Hino\",\n  \"Hombilt\",\n  \"Honda\",\n  \"Hyundai\",\n  \"International\",\n  \"Jaguar\",\n  \"Jialing\",\n  \"Kenworth\",\n  \"Kia\",\n  \"Lamborghini\",\n  \"Land Rover\",\n  \"Latitude\",\n  \"Lotus\",\n  \"Mack\",\n  \"Maserati\",\n  \"Mazda\",\n  \"Mercedes-Benz\",\n  \"Mills\",\n  \"Mitsubishi\",\n  \"NABI\",\n  \"Navistar\",\n  \"Nissan\",\n  \"NUMMI\",\n  \"Optima\",\n  \"Oshkosh\",\n  \"Owosso\",\n  \"PACCAR\",\n  \"Peterbilt\",\n  \"Peugot\",\n  \"Quest\",\n  \"Renault\",\n  \"Rolls Royce\",\n  \"Subaru\",\n  \"Suzuki\",\n  \"Tesla\",\n  \"Toyota\",\n  \"Volkswagen\",\n  \"Volvo\"\n]\n\n// BACKEND API-APP SHARED ROUTES\n// POST\n  // /add \n  // /add/:id \n  // /delete/log/entry/:id\n  // /remove/photo/:filename \n  // /account/forgot \n  // /account/reset/:token \n\n// API ONLY ROUTES\n// GET\n  // /api/search       --> cleanly handled by SearchBox component\n  // /api/log          --> not used anywhere... (login and account updates return {User+Vehicle})\n// POST\n  // /api/logout       --> DONE - Handled by Logout component\n  // /api/login        --> DONE \n  // /api/register     --> DONE (TODO cleanup expectations of children wrt. new user flow i.e. need vehicle asap)\n  // /api/vehicle/add  --> DONE (TODO error boundaries)\n  // /api/vehicle      --> DONE (TODO error boundaries)\n  // /api/account      --> DONE\n","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport ForgotPassword from './ForgotPassword'\nimport Loading from '../Loading'\nimport { apiLogin } from '../../helpers'\nimport '../../styles/login.css'\n\nfunction Login(props) {\n  const history = useHistory()\n  const [state, setState] = useState({\n    email: '',\n    password: '',\n    persist: false\n  })\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    // if they checked the box to have their username remembered...\n    const email = localStorage.getItem('maint_log_username')\n    if (email && email.length > 0) {\n      setState({\n        ...state, email: email, persist: true\n      })\n    }\n  }, []) // only run at initial page load\n\n  const handleInputChange = event => {\n    const { value, name } = event.target\n    setState({\n      ...state,\n      [name]: value\n    })\n  }\n\n  // Called whenever there is a change in the checkbox state\n  const handlePersistCheckboxChange = event => {\n    // if persist is unchecked/false when they click then they just toggled it to checked/true \n    // thus we save the email address to storage\n    if (!state.persist && state.email) {\n      localStorage.setItem('maint_log_username', state.email)\n    } else {\n      localStorage.removeItem('maint_log_username')\n    }\n    setState({ ...state, persist: !state.persist })\n  }\n\n  // Called each time when leaving (onBlur) the email field\n  const checkAndSave = event => {\n    if (state.persist && state.email) {\n      localStorage.setItem('maint_log_username', state.email)\n    }\n  }\n\n  const handleLogin = async event => {\n    event.preventDefault()\n    const { email, password } = state\n    setLoading(true)\n    // Save email for next time login\n    if (state.persist && state.email) {\n      localStorage.setItem('maint_log_username', state.email)\n    }\n    // login func already wrapped in a try/catch. returns an error in result[response] if there is a failure\n    const result = await apiLogin(email, password)\n    if (!result || result.response !== undefined) {\n      setLoading(false)\n      toast(`Error logging in. Please try again. Status ${result.response.status}: ${result.response.statusText}.`)\n      return\n    }\n    const { user } = result\n    console.log('Server returned user:')\n    console.log(user)\n\n    if (Object.keys(user).length === 0) {\n      toast('Server could not locate that user. Please try again.')\n      return\n    }\n    if (!user.selectedVehicles || user.selectedVehicles === undefined) user.selectedVehicles = []\n    await props.login(user)\n    setLoading(false)\n    console.log('Loading set to false in Login component. Pushing history to /')\n    return history.push('/')\n  }\n\n  if (loading) return <Loading message=\"Logging in...\" messages={[\"Logging in...\"] } /> \n\n  return (\n    <div className=\"card\">\n      <h3>Login</h3>\n      <form className=\"padded\" onSubmit={handleLogin} method=\"POST\">\n        <label htmlFor=\"email\">Email Address</label>\n        <input type=\"email\" name=\"email\" placeholder=\"Enter email...\" value={state.email || ''} onChange={handleInputChange} onBlur={checkAndSave} />\n        <label htmlFor=\"password\">Password</label>\n        <input type=\"password\" name=\"password\" placeholder=\"Enter password...\" value={state.password || ''} onChange={handleInputChange} />\n        <button className=\"button\" type=\"submit\" >Log In </button>\n        <div className=\"remember_box\">\n          <label htmlFor=\"persist\">Remember me</label>\n          <input type=\"checkbox\" name=\"persist\" checked={state.persist} onChange={handlePersistCheckboxChange} /> \n        </div>\n      </form>\n\n      <ForgotPassword email={state.email || ''} /> \n    </div>\n  )\n}\n\nLogin.propTypes = {\n  login: PropTypes.func.isRequired\n}\n\nexport default Login\n","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport { register } from '../../helpers'\nimport Loading from '../Loading'\n\nfunction Register(props) {\n  const history = useHistory()\n\n  const [state, setState] = useState({\n    name: '',\n    email: '',\n    password: '',\n    passwordConfirm: ''\n  })\n  const [loading, setLoading] = useState(false)\n\n  const handleInputChange = event => {\n    setState({\n      ...state,\n      [event.target.name]: event.target.value\n    })\n  }\n\n  const handleRegister = async event => {\n    event.preventDefault()\n    console.log(state)\n    const { name, email, password, passwordConfirm } = state\n    setLoading(true)\n    console.log('Loading. Sending to register: ')\n    // console.log(name, email, password, passwordConfirm)\n    const result = await register(name, email, password, passwordConfirm)\n    if (!result || result.response !== undefined) {\n      setLoading(false)\n      return toast(`Error registering a new account. Please try again. Status ${result.response.status}: ${result.response.statusText}.`)\n    }\n    if (Object.keys(result.user).length === 0) {\n      setLoading(false)\n      return toast('Server was unable to register you at this time. Please try again.')\n    }\n    await props.updateUserState(result.user)\n    history.push('/')\n  }\n\n  if (loading) return <Loading message=\"Registering New User...\" />\n\n  return (\n    <div className=\"card\">\n      <h3>Register</h3>\n      <form className=\"padded\" onSubmit={handleRegister} method=\"POST\" encType=\"multipart/form-data\" multiple=\"multiple\">\n        <label htmlFor=\"name\">Name</label>\n        <input type=\"text\" name=\"name\" placeholder=\"Enter name...\" value={state.name || ''} onChange={handleInputChange} />\n        <label htmlFor=\"email\">Email Address</label>\n        <input type=\"email\" name=\"email\" placeholder=\"Enter email...\" value={state.email || ''} onChange={handleInputChange} />\n        <label htmlFor=\"password\">Password</label>\n        <input type=\"password\" name=\"password\" placeholder=\"Enter password...\" value={state.password || ''} onChange={handleInputChange} />\n        <label htmlFor=\"passwordConfirm\">Confirm Password</label>\n        <input type=\"password\" name=\"passwordConfirm\" placeholder=\"Confirm password...\" value={state.passwordConfirm || ''} onChange={handleInputChange} />\n        <button className=\"button\" type=\"submit\" >Register </button>\n      </form>\n    </div>\n  )\n}\n\nRegister.propTypes = {\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default Register\n","import React, { useState, useEffect } from 'react'\n\nfunction ThemeSwitcher() {\n  const [currentTheme, changeTheme] = useState('dark')\n\n  useEffect(() => {\n    const savedTheme = document.documentElement.className || localStorage.getItem('maint_log_theme')\n    if (savedTheme) changeTheme(savedTheme)\n  }, [])\n\n  function toggleTheme(event) {\n    event.preventDefault()\n    const newTheme = currentTheme === 'dark' ? 'light' : 'dark'\n    localStorage.setItem('maint_log_theme', newTheme)\n    document.documentElement.className = newTheme\n    changeTheme(newTheme) \n  }\n\n  return (\n    <div className=\"card\">\n      <h3>Theme Settings</h3>\n      <div className=\"theme__container padded\">\n        <label htmlFor=\"theme\" className=\"\" >{`${currentTheme.substring(0,1).toUpperCase()}${currentTheme.substring(1)} Mode Enabled`}</label>\n        <button className=\"button\" onClick={toggleTheme}>Switch Theme</button>\n      </div>\n    </div>\n  )\n}\n\nexport default ThemeSwitcher","import React from 'react'\nimport PropTypes from 'prop-types'\nimport Login from '../components/account/Login'\nimport Register from '../components/account/Register'\nimport ThemeSwitcher from '../components/account/ThemeSwitcher'\n\nimport '../styles/guestHome.css'\n\nfunction GuestHome(props) {\n  return (\n    <div className=\"inner\">\n      <div className=\"welcome__guest__container\">\n        <section className=\"welcome__guest__hero\">\n          <h3>Keep track of the service history of your vehicles.</h3>\n          <ul>\n            <li>Record what was done, when, by whom, and where.</li>\n            <li>Include photos of before and after the service, parts used, and receipts.</li>\n            <li>Write short and long descriptions of work done.</li>\n            <li>Recurring services can be scheduled for a future due date or mileage.</li>\n          </ul>\n        </section>\n        <p><strong>Returning user? </strong>Please login to access your log.</p>\n        <Login login={props.login} />\n        <p><strong>New user? </strong>Register an account & start tracking your vehicle maintenance.</p>\n        <Register updateUserState={props.updateUserState} />\n        <ThemeSwitcher />\n      </div> \n    </div>\n  )\n}\n\nGuestHome.propTypes = {\n  updateUserState: PropTypes.func.isRequired,\n  login: PropTypes.func.isRequired\n}\n \nexport default GuestHome","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { ReactSVG } from 'react-svg'\nimport PropTypes from 'prop-types'\n\nimport SearchIcon from '../images/search.svg'\nimport AddIcon from '../images/addLog.svg'\nimport TodoIcon from '../images/todo.svg'\nimport SettingsIcon from '../images/account.svg'\nimport LogIcon from '../images/log.svg'\n\nimport '../styles/home.css'\n\nfunction Home(props) {\n  console.log('Home page rendering with props:')\n  console.dir(props)\n  \n  return (\n    <div className=\"inner\">\n      <div className=\"home__actions__container\">\n        <Link className=\"button card home__actions history\" to=\"/log\">\n          <ReactSVG src={LogIcon} role=\"img\" aria-label=\"Log Icon\" fallback={() => <img src={LogIcon} alt=\"log icon\" description=\"log icon\" className=\"svg\" />} /> \n          <p>View Full Maintenance Log History</p>\n        </Link>\n        <Link className=\"button card home__actions add\" to=\"/add\">\n          <ReactSVG src={AddIcon} role=\"img\" aria-label=\"Add Icon\" fallback={() => <img src={AddIcon} alt=\"add icon\" description=\"add icon\" className=\"svg\" />} /> \n          <p>Add New Log Entry</p>\n        </Link>\n        <Link className=\"button card home__actions todo upcoming-maintenance\" to=\"/todo\">\n          <ReactSVG src={TodoIcon} role=\"img\" aria-label=\"Todo Icon\" fallback={() => <img src={TodoIcon} alt=\"todo icon\" description=\"todo icon\" className=\"svg\" />} /> \n          <p>View Upcoming Scheduled Maintenance</p>\n        </Link>\n        <Link className=\"button card home__actions search__main search\" to=\"/search\">\n          <ReactSVG src={SearchIcon} role=\"img\" aria-label=\"Search Icon\" fallback={() => <img src={SearchIcon} alt=\"search icon\" description=\"search icon\" className=\"svg\" />} /> \n          <p>Search Log Entries</p>\n        </Link>\n        <Link className=\"button card home__actions settings\" to=\"/settings\">\n          <ReactSVG src={SettingsIcon} role=\"img\" aria-label=\"Settings Icon\" fallback={() => <img src={SettingsIcon} alt=\"settings icon\" description=\"settings icon\" className=\"svg\" />} /> \n          <p>Edit Your Vehicle & Account Settings</p>\n        </Link>\n      </div>\n    </div>\n  )\n}\n\nHome.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicle: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default Home","import React from 'react'\nimport PropTypes from 'prop-types'\nimport '../../styles/vehicle.css'\n\nfunction VehiclesSelector(props) {\n  console.log('Vehicle selector component with props: ')\n  console.dir(props)\n  return (\n    <div className=\"card vehicles__selector vehicles\">\n      <div>\n        <h4 className=\"flexy vehicles__selector__header\">\n          <span>Your Vehicles</span> \n          <span>Selected for View</span>\n        </h4>\n      </div>\n      { (!props.allVehicles || props.allVehicles.length === 0) && <span>(none)</span> }\n      { props.allVehicles && props.allVehicles.length > 0 && props.allVehicles.map(vehicle => {\n        return (\n          <div key={vehicle.id} className=\"well vehicle\">\n            <p>{vehicle.year} {vehicle.make} {vehicle.model}</p>\n            <input type=\"checkbox\" checked={props.vehiclesShowing.includes(vehicle.id)} name={vehicle.id} onChange={props.changeVehiclesShowing} /> \n          </div>\n        )\n      }) }\n    </div>\n  )\n}\n\nVehiclesSelector.propTypes = {\n  allVehicles: PropTypes.array.isRequired, // an array of all vehicle data { id, year, make model etc }\n  vehiclesShowing: PropTypes.array.isRequired, // an array[] of 0+ vehicle IDs that are currently selected for viewing\n  changeVehiclesShowing: PropTypes.func.isRequired // Log and Todo pages use this to render entries based on selected vehicles\n}\n\nexport default VehiclesSelector\n","import React from 'react'\nimport moment from 'moment'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport '../../styles/logEntry.css'\n\nfunction LogEntry(props) {\n  const log = props.data\n  if (!log) return ( <div>Error loading log data...</div> )\n\n  return (\n    <div className=\"card log__entry\">\n      <Link to={`/log/${log.slug}`}>\n        <h4>{log.name}</h4>\n      </Link>\n      <div className=\"log__details__container\">\n        <div className=\"log__details log__details__service\">\n          <p>{log.shortDescription}</p>\n          <p>{log.serviceLocation}</p>\n        </div>\n        <div className=\"log__details log__details__dates\">\n          <p>{moment(log.dateCompleted).fromNow()}</p>\n          { log.dateDue && <p>Next <span>{moment(log.dateDue).fromNow()}</span></p> }\n        </div>\n        <div className=\"log__details log__details__mileage\">\n          <p>{log.odometer && Number(log.odometer).toLocaleString()} miles</p>\n          { log.mileageDue && <p>Next <span>{Number(log.mileageDue).toLocaleString()}</span></p> }\n        </div>\n        <div className=\"log__details log__details__costs\">\n          <p>P ${log.partsCost}</p>\n          <p>L ${log.laborCost}</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nLogEntry.propTypes = {\n  data: PropTypes.object.isRequired\n}\n\nexport default LogEntry","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport '../../styles/logSorter.css'\n\nfunction LogSorter(props) {\n  function sortBy(method, event) {\n    const arrow = event.target.childNodes[1]\n    // don't sort if it doesn't exist or there are 1 or 0 log entries\n    if (!props || !props.user || !props.user.log || props.user.log.length <= 1) return\n\n    if (method === 'date') {\n      let tempLogArray = []\n      // if they are in descending order\n      if ( new Date(props.user.log[0].dateCompleted).valueOf() > new Date(props.user.log[1].dateCompleted).valueOf() ) {\n        // sort log entries in ascending order\n        tempLogArray = [...props.user.log].sort((first, second) => new Date(first.dateCompleted).valueOf() - new Date(second.dateCompleted).valueOf() )\n        arrow.classList.remove('log__sorter__arrow__selected')\n      } else {\n        tempLogArray = [...props.user.log].sort((first, second) => new Date(second.dateCompleted).valueOf() - new Date(first.dateCompleted).valueOf() )\n        arrow.classList.add('log__sorter__arrow__selected')\n      }\n      let updatedUser = {...props.user}\n      updatedUser.log = tempLogArray\n      props.updateUserState(updatedUser)\n      return\n    }\n\n    if (method === 'service') {\n      let tempLogArray = []\n      // if they are not already in alphabetical order \n      if (props.user.log[0].name.localeCompare(props.user.log[1].name) > -1) {\n        // sort them\n        tempLogArray = [...props.user.log].sort((first, second) => first.name.localeCompare(second.name) )\n        arrow.classList.add('log__sorter__arrow__selected')\n      } else { // otherwise sort them in reverse alphabetical order\n        tempLogArray = [...props.user.log].sort((first, second) => second.name.localeCompare(first.name) )\n        arrow.classList.remove('log__sorter__arrow__selected')\n      }\n      let updatedUser = {...props.user}\n      updatedUser.log = tempLogArray\n      props.updateUserState(updatedUser)\n      return\n    }\n\n    if (method === 'mileage') {\n      let tempLogArray = []\n      if (Number(props.user.log[0].odometer) > Number(props.user.log[1].odometer)) {\n        tempLogArray = [...props.user.log].sort((first, second) => Number(first.odometer) <= Number(second.odometer) ? -1 : 1 )\n        arrow.classList.remove('log__sorter__arrow__selected')\n      } else {\n        tempLogArray = [...props.user.log].sort((first, second) =>  Number(first.odometer) <= Number(second.odometer) ? 1 : -1 )\n        arrow.classList.add('log__sorter__arrow__selected')\n      }\n      let updatedUser = {...props.user}\n      updatedUser.log = tempLogArray\n      props.updateUserState(updatedUser)\n      return\n    }\n\n    if (method === 'costs') {\n      let tempLogArray = []\n      if ( (Number(props.user.log[0].partsCost) + Number(props.user.log[0].laborCost)) >= (Number(props.user.log[1].partsCost) + Number(props.user.log[1].laborCost))) {\n        tempLogArray = [...props.user.log].sort((first, second) => (Number(first.partsCost) + Number(first.laborCost)) <= (Number(second.partsCost) + Number(second.laborCost)) ? -1 : 1 )\n        arrow.classList.remove('log__sorter__arrow__selected')\n      } else {\n        tempLogArray = [...props.user.log].sort((first, second) => (Number(first.partsCost) + Number(first.laborCost)) <= (Number(second.partsCost) + Number(second.laborCost)) ? 1 : -1 )\n        arrow.classList.add('log__sorter__arrow__selected')\n      }\n      let updatedUser = {...props.user}\n      updatedUser.log = tempLogArray\n      props.updateUserState(updatedUser)\n      return\n    }\n  }\n\n  return (\n    <div className='log__sorter__container'>\n      <div className=\"log__sorter__item log__sorter__service\">\n        <span onClick={e => sortBy('service',e)}>service <span className=\"log__sorter__arrow service__arrow\"></span></span>\n      </div>\n      <div className=\"log__sorter__item log__sorter__dates\">\n        <span onClick={e => sortBy('date',e)}>dates <span className=\"log__sorter__arrow date__arrow\"></span></span>\n      </div>\n      <div className=\"log__sorter__item log__sorter__mileage\">\n        <span onClick={e => sortBy('mileage',e)}>mileage <span className=\"log__sorter__arrow mileage__arrow\"></span></span>\n      </div>\n      <div className=\"log__sorter__item log__sorter__costs\">\n        <span onClick={e => sortBy('costs',e)}>costs <span className=\"log__sorter__arrow costs__arrow\"></span></span>\n      </div>\n    </div>\n  )\n}\n\nLogSorter.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default LogSorter\n","import React, { useState, useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nimport VehiclesSelector from '../components/vehicle/VehiclesSelector'\nimport LogEntry from '../components/log/LogEntry'\nimport LogSorter from '../components/log/LogSorter'\n\nfunction Log(props) {\n  // [] Contains String IDs of all vehicles currently selected for view\n  const [vehiclesShowing, changeVehiclesShowing] = useState([])\n  // [] Contains log entries that will be rendered (as that log entry's vehicle has been selected) \n  const [entriesShowing, changeEntriesShowing] = useState([])\n\n  // at initial mount, setup data for rendering\n  useEffect(() => {\n    // Defaults to the currently selectedVehicle(s) ID(s) if any, OR\n    // Defaults to all ID(s) in the user's vehicles array\n    const veh = []\n    if (props.user.selectedVehicles.length > 0) { \n      props.user.selectedVehicles.forEach(vehicle => {\n        if (vehicle !== undefined && vehicle.id) veh.push(vehicle.id)\n      })\n    } else if (props.user.vehicles.length > 0) {\n      props.user.vehicles.forEach(vehicle => {\n        if (vehicle !== undefined && vehicle.id) veh.push(vehicle.id)\n      })\n    }\n    console.log('Found initial vehicleShowing ID(s): ')\n    console.log(veh)\n    changeVehiclesShowing([...veh])\n\n    const ent = props.user.log.filter(logEntry => veh.includes(logEntry.vehicle))\n    console.log('Found initial entries showing: ')\n    console.log(ent)\n    changeEntriesShowing(ent)\n    console.log('After setup. Entries: ')\n    console.log(entriesShowing)\n  }, []) // empty [] only runs this at initial startup, prevents infinite re-render loop\n\n  console.log('(After useEffect) Vehicles and Logs: ')\n  console.log(vehiclesShowing)\n  console.log(entriesShowing)\n\n  const changeVehicleStatus = event => {\n    const clickedOnVehicleId = event.target.name\n    console.log(`Changing click status for vehicle id: ${clickedOnVehicleId}.`)\n    let vehicleUpdates = []\n    // if it is already in the list, remove it\n    if (vehiclesShowing.includes(clickedOnVehicleId)) {\n      console.log('current vehicles includes this vehicle ID already. Removing it.')\n      vehicleUpdates = vehiclesShowing.filter(vehicleId => vehicleId !== clickedOnVehicleId)\n    } else { // if it was not in the list, add it\n      console.log('current vehicles does not include this vehicle ID. Adding it.')\n      vehicleUpdates = vehiclesShowing\n      vehicleUpdates.push(clickedOnVehicleId)\n    }\n    console.log('Vehicle Updates queued: ')\n    console.log(vehicleUpdates)\n    changeVehiclesShowing(vehicleUpdates)\n    console.log('Updated which vehicles are displayed. vehiclesShowing state: ')\n    console.log(vehiclesShowing)\n\n    console.log('Log entries updates queued: ')\n    const logUpdates = props.user.log.filter(logEntry => vehicleUpdates.includes(logEntry.vehicle))\n    console.log(logUpdates)\n    changeEntriesShowing(logUpdates)\n    console.log('Updated which log entries are displayed: ')\n    console.log(entriesShowing)\n  }\n\n  return (\n    <div className=\"inner\">\n      <h2>Service History</h2>\n      <VehiclesSelector allVehicles={props.user.vehicles} vehiclesShowing={vehiclesShowing} changeVehiclesShowing={changeVehicleStatus} />\n      { entriesShowing.length === 0 &&\n        <div className=\"card no__log\">\n          <h3>No Log Entries Found!</h3>\n          <div>\n            <p className=\"padded\">No log entries for the vehicles selected. Please select more vehicles or add a new entry.</p>\n          </div>\n          <Link className=\"button\" to=\"/add\">Add A Log Entry Now</Link>\n        </div>\n      }\n      { entriesShowing.length > 0 &&\n        <div className=\"padded\">\n          <LogSorter {...props} />\n          {entriesShowing && entriesShowing.map(entry => <LogEntry key={entry._id} data={entry} />)}\n        </div>\n      }\n    </div>\n  )\n}\n\nLog.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  })\n}\n\nexport default Log","import React from 'react'\nimport { Redirect } from 'react-router'\n\nfunction NotFound() {\n  console.log('unable to find a page associated with this route. redirecting to /welcome')\n  return <Redirect to=\"/welcome\" />\n}\n\nexport default NotFound","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { useParams, useHistory } from 'react-router-dom'\nimport axios from 'axios'\nimport { toast } from 'react-toastify'\n\nimport Loading from '../components/Loading'\nimport { resetPassword } from '../helpers'\n\nfunction PasswordReset(props) {\n  // params contains the reset link token\n  const { token } = useParams()\n  console.log('Rendering password reset with token: '+token)\n  const history = useHistory()\n  if (!token) history.push('/welcome')\n\n  // verify token validity\n  // an invalid token is expired or just the wrong hash, don't render anything...  \n  useEffect(() => {\n    async function checkValidity() { \n      try {\n        console.log(`posting to: ${process.env.REACT_APP_API_DOMAIN}/account/reset/${token}/confirm`)\n        const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/account/reset/${token}/confirm`)\n        console.log(response)\n        console.dir(response)\n        if (response.status === 200) return true\n        if (response.status === 404) history.push('/welcome')\n        console.log('Response received but with status code: '+response.status)\n        const error = new Error(response.error)\n        throw error\n      } catch(err) {\n        console.log('Error posting to /account/reset/'+token+'/confirm')\n        console.dir(err)\n        history.push('/welcome')\n      }\n    }\n    checkValidity()\n  }, []) // empty [] indicates only run this on initial render/mount, not re-renders\n\n  const [state, setState] = useState({\n    token: token,\n    password: '',\n    passwordConfirm: ''\n  })\n  const [loading, setLoading] = useState(false)\n\n  const handleInputChange = event => {\n    setState({\n      ...state,\n      [event.target.name]: event.target.value\n    })\n  }\n\n  const handleReset = async event => {\n    event.preventDefault()\n    const { token, password, passwordConfirm } = state\n    setLoading(true)\n    console.log('Loading. Sending to /account/reset/:token ')\n    console.log(token, password, passwordConfirm)\n    // result upon success is the updated login info (session id, cookies, user, log, vehicles)\n    const result = await resetPassword(token, password, passwordConfirm)\n    console.log(result)\n    setLoading(false)\n    if (!result || result.response !== undefined) {\n      toast(`Error resetting password. Please try again. Status ${result.response.status}: ${result.response.statusText}.`)\n      return\n    }\n    await props.updateUserState(result)\n    history.push('/')\n  }\n\n  if (loading) return <Loading message=\"Updating Your Password...\" />\n\n  return (\n    <div className=\"card\">\n      <h3>Password Reset</h3>\n      <form className=\"padded\" onSubmit={handleReset} method=\"POST\" encType=\"multipart/form-data\" multiple=\"multiple\">\n        <input type=\"hidden\" name=\"token\" value={token} />\n        <label htmlFor=\"password\">Password</label>\n        <input type=\"password\" name=\"password\" placeholder=\"Enter password...\" value={state.password || ''} onChange={handleInputChange} />\n        <label htmlFor=\"passwordConfirm\">Confirm Password</label>\n        <input type=\"password\" name=\"passwordConfirm\" placeholder=\"Confirm password...\" value={state.passwordConfirm || ''} onChange={handleInputChange} />\n        <input className=\"button\" type=\"submit\" value=\"Reset Password \" />\n      </form>\n    </div>\n  )\n}\n\nPasswordReset.propTypes = {\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default PasswordReset","import React from 'react'\nimport { Link } from 'react-router-dom'\n\nfunction SearchResults(props) {\n  return (\n    <section className=\"search__results\" >\n      <h4>Results: </h4>\n      <div>\n        {props.results.map((result, index) => (\n          <div key={result.id} className=\"card search__result\">\n            <h3>{result.name}</h3>\n            <p className=\"result__detail\">{result.shortDescription}</p>\n            <div className=\"search__result__buttons\">\n              <Link to={`log/${result.slug}`} className=\"button\">View</Link>\n              <Link to={`log/${result.id}/edit`} className=\"button\">Edit</Link>            \n            </div>\n          </div>\n        ))}\n      </div>\n    </section>\n  )\n}\n\nexport default SearchResults","import React from 'react'\nimport axios from 'axios'\nimport { ReactSVG } from 'react-svg'\nimport { toast } from 'react-toastify'\n\nimport SearchResults from './SearchResults'\nimport Loading from './Loading'\nimport MagnifyingGlassIcon from '../images/magnifying.svg'\n\nimport '../styles/search.css'\n\nclass SearchBox extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      query: '',\n      results: [],\n      searching: false,\n      counter: 0\n    }\n  }\n\n  getInfo = async () => {\n    try {\n      const response = await axios.get(`${process.env.REACT_APP_API_DOMAIN}/api/search?q=${this.state.query}`)\n      if (response.data.length) {\n        this.setState({\n          results: response.data,\n          searching: false\n        }) \n      }\n    } catch (err) {\n        console.log('Error posting to /api/search')\n        console.dir(err)\n        toast('Error searching log data! Please try again.')\n        return\n    }\n  }\n\n  handleInputChange = e => {\n    e.preventDefault()\n    this.setState({\n      query: e.target.value,\n      searching: true,\n      results: []\n    }, () => {\n      // only query the API at most 2x per second (every 500 ms)\n      if (this.state.query && this.state.query.length > 1 && Date.now() - this.state.counter > 500) {\n        this.getInfo()\n        this.setState({ counter: Date.now() })\n      } else { // wait half a second, then query\n        setTimeout(() => {\n          this.getInfo()\n        }, 500)\n      }\n    })\n  }\n\n  blurCleanup = () => {\n    if (this.state.query.length === 0) this.setState({ results: [] })\n  }\n\n  clearInput = e => {\n    e.preventDefault()\n    this.setState({ query: '', searching: false, results: [] })\n  }\n\n  render() {\n    const buttonImg = this.state.query && this.state.query.length > 0 ? \n      <strong>&times;</strong> :\n      <ReactSVG src={MagnifyingGlassIcon} role=\"img\" aria-label=\"Magnifying Glass Icon\" fallback={() => <img src={MagnifyingGlassIcon} alt=\"magnifying glass icon\" description=\"magnifying glass icon\" className=\"svg\" />} /> \n\n    return (\n      <form className=\"search__form\">\n        <div className=\"search__input__container\">\n          <input\n            placeholder=\"Search parts, service, etc...\"\n            onKeyUp={this.handleInputChange}\n            onChange={this.handleInputChange}\n            onBlur={this.blurCleanup}\n            value={this.state.query}\n            className='search__input'\n          />\n          <button className=\"button search__button\" onClick={this.clearInput}>{buttonImg}</button>\n        </div>\n        {this.state.loading && <Loading message={`Searching for: ${this.state.query}`} />}\n        {this.state.results && this.state.results.length > 0 &&\n          <SearchResults homepage={this.props.homepage} results={this.state.results} /> \n        }\n        {this.state.results.length === 0 && this.state.query.length > 0 &&\n          <h5>No match found for that search...</h5>\n        }\n      </form>\n    )\n  }\n}\n\nexport default SearchBox\n","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport SearchBox from '../components/SearchBox'\n\nfunction Search() {\n  return (\n    <div className=\"inner\">\n      <h2>Search</h2>\n      <div className=\"card\">\n        <SearchBox />\n      </div>\n    </div>\n  )  \n}\n\nSearch.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicle: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  })\n}\n\nexport default Search","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport { useHistory } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nfunction Logout(props) {\n  const history = useHistory()\n  const [showLogoutButton, toggleShowLogoutButton] = useState(false)\n\n  const toggleConfirmLogout = event => {\n    event.preventDefault()\n    toggleShowLogoutButton(!showLogoutButton) // flip true -> false -> true...\n  }\n\n  const apiLogout = async event => {\n    event.preventDefault()\n    try {\n      const response = await axios.post(`${process.env.REACT_APP_API_DOMAIN}/api/logout`)\n      if (response.status === 200) {\n        props.updateUserState({ name: '', userID: '', sessionID: '', cookies: '', email: '', log: [], vehicles: [], selectedVehicles: []})\n        return history.push('/welcome')\n      } else {\n        const error = new Error(response.error)\n        throw error\n      }\n    } catch(err) {\n      console.error(err)\n      toast(err)\n    }\n  }\n  return (\n    <div className=\"card\">\n      <h3>Disconnect Account and Logout</h3>\n      <div className=\"logout__container padded\">\n        <button className={`button ${showLogoutButton ? 'confirm--active' : 'confirm'}`} onClick={toggleConfirmLogout}>{showLogoutButton ? 'Cancel Logout' : 'Logout'}</button>\n        { showLogoutButton && <button className=\"button disconnect\" onClick={apiLogout}><span className=\"red\">Confirm and Logout</span></button> }\n      </div>\n    </div>\n  )\n}\n\nLogout.propTypes = {\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default Logout","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nimport { updateUserAccount } from '../../helpers'\n\nfunction AccountSettings(props) {\n  const [state, setState] = useState({\n    name: props.user.name || '',\n    email: props.user.email || '',\n    password: ''\n  })\n\n  const handleInputChange = event => {\n    setState({ ...state, [event.target.name]: event.target.value })\n  }\n\n\n  const saveAccountChanges = async event => {\n    event.preventDefault()\n    const userUpdates = { ...props.user }\n    userUpdates.name = state.name\n    userUpdates.email = state.email\n    // TODO confirmation and password changing option\n    const updates = await updateUserAccount(userUpdates)\n    console.log('1')\n    console.log('TODO why props.user instead of the extant userUpdates?')\n    const updatedUser = props.user\n    updatedUser.log = updates.log\n    updatedUser.vehicles = updates.vehicles\n    updatedUser.selectedVehicles = state.selectedVehicles\n    await props.updateUserState(updatedUser)\n  }\n\n  return (\n    <div className=\"card\">\n      <h3>Account</h3>\n      <form className=\"padded\" onSubmit={saveAccountChanges} method=\"POST\">\n        <label htmlFor=\"name\">Name</label>\n        <input type=\"text\" placeholder=\"Enter name...\" name=\"name\" value={state.name || ''} onChange={handleInputChange} />\n        <label htmlFor=\"email\">Email Address</label>\n        <input type=\"email\" placeholder=\"Enter email...\" name=\"email\" value={state.email || ''} onChange={handleInputChange} />\n        {/* <label htmlFor=\"password\">Password</label>\n        <input type=\"password\" placeholder=\"Enter password...\" name=\"password\" value={state.password || ''} onChange={handleInputChange} /> */}\n        <button className=\"button\" type=\"submit\" >Save Account Changes</button>\n      </form>\n    </div>\n  )\n}\n\nAccountSettings.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n  updateUserState: PropTypes.func.isRequired\n  // history: PropTypes.object.isRequired\n}\n\nexport default AccountSettings","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport Loading from '../Loading'\n\nclass VLVin extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      vin: '',\n      resultsError: null,\n      vehicle: {\n        make: '',\n        model: '',\n        year: ''\n      },\n      loading: false\n    }\n  }\n\n  handleInputChange = event => {\n    this.setState({ vin: event.target.value })\n  }\n\n  vinSearch = async event => {\n    event.stopPropagation()\n    event.preventDefault()\n    if (!this.state.vin) return\n    await this.setState({ loading: true })\n    try {\n      const response = await fetch(`https://vpic.nhtsa.dot.gov/api/vehicles/decodevin/${this.state.vin}?format=json`)\n      const data = await response.json()\n      const results = await data[\"Results\"]\n      // Per the NHTSA API spec (https://vpic.nhtsa.dot.gov/api/):\n      const error = Number(results[4][\"Value\"][0])\n      if (error === 0) {\n        const year = results[9][\"Value\"]\n        const rawMake = results[6][\"Value\"]\n        const make = rawMake.charAt(0).toUpperCase() + rawMake.slice(1).toLowerCase()\n        const model = results[8][\"Value\"]\n        this.setState({ vehicle: { year, make, model }, loading: false })\n      } else {\n        this.setState({ resultsError: `No Results Found for VIN \"${this.state.vin}\". Please try again.`, loading: false })\n      }\n    } catch (err) {\n      console.error(err)\n    }\n  }\n\n  render() {\n    if (this.state.loading) return <Loading message=\"Searching for VIN...\" />\n\n    return (\n      <div className=\"searchByVinDiv\">\n        <div className=\"vinSearchInput\">\n          <label htmlFor=\"vin\">VIN</label>\n          <input type=\"text\" name=\"vin\" value={this.state.vin} onChange={this.handleInputChange} />\n          <button className=\"button\" onClick={this.vinSearch}>Search For VIN</button>\n        </div>\n        <div className=\"vehicleResults\">\n          { this.state.resultsError && <span>{this.state.resultsError}</span> }\n          { !this.state.resultsError && this.state.vehicle && this.state.vehicle.make.length > 0 &&\n            <>\n              <h4>Vehicle Found</h4>\n              <span>{`Year: ${this.state.vehicle.year}`}</span>\n              <span>{`Make: ${this.state.vehicle.make}`}</span>\n              <span>{`Model: ${this.state.vehicle.model}`}</span>\n              <button className=\"button\" onClick={() => this.props.saveNewVehicle({ vin: this.state.vin, ...this.state.vehicle })}>Add Vehicle To Account</button>\n            </>          \n          }\n        </div>\n      </div>\n    )\n  }\n}\n\nVLVin.propTypes = {\n  saveNewVehicle: PropTypes.func.isRequired\n}\n\nexport default VLVin","import React, { useState } from 'react'\nimport PropTypes from 'prop-types'\n\nfunction VLManual(props) {\n  const [state, setState] = useState({\n    year: props.year || '',\n    make: props.make || '',\n    model: props.model || '',\n    vin: props.vin || '',\n    odometer: props.odometer || 0,\n    primary: props.primary || false,\n    id: props._id || '',\n    owner: props.owner || ''\n  })\n\n  const handleInputChange = event => {\n    setState({ ...state, [event.target.name]: event.target.value })\n  }\n\n  const togglePrimary = () => { \n    setState({ ...state, primary: !state.primary })\n  }\n\n  return (\n    <div className=\"form manualVehicleEntryDiv\">\n      <label htmlFor=\"year\">Year</label>\n      <input type=\"number\" name=\"year\" min=\"1900\" step=\"1\" value={state.year} onChange={handleInputChange} />\n      <label htmlFor=\"make\">Make </label>\n      <input type=\"text\" name=\"make\" value={state.make} onChange={handleInputChange} />\n      <label htmlFor=\"model\">Model </label>\n      <input type=\"text\" name=\"model\" value={state.model} onChange={handleInputChange} />\n      <label htmlFor=\"odometer\">Latest Odometer Reading</label>\n      <input type=\"number\" name=\"odometer\" min=\"0\" step=\"0.1\" value={state.odometer} onChange={handleInputChange} />\n      <label htmlFor=\"vin\">VIN</label>\n      <input type=\"text\" name=\"vin\" value={state.vin} onChange={handleInputChange} />\n      <div className=\"checkboxes__container\">\n        <label htmlFor=\"primaryCheckbox\">Main Vehicle</label>\n        <input type=\"checkbox\" name=\"primaryCheckbox\" checked={state.primary} onChange={togglePrimary} />\n      </div>\n      {props.editing ?\n        <button className=\"button\" onClick={() => props.saveVehicleChanges(state)}>Save Vehicle Changes</button> :\n        <button className=\"button\" onClick={() => props.saveNewVehicle(state)}>Add Vehicle To Account</button>      \n      }\n    </div>\n  )\n}\n\nVLManual.propTypes = {\n  saveNewVehicle: PropTypes.func.isRequired,\n  saveVehicleChanges: PropTypes.func,\n  year: PropTypes.number,\n  make: PropTypes.string,\n  model: PropTypes.string,\n  vin: PropTypes.string,\n  odometer: PropTypes.number,\n  id: PropTypes.string,\n  owner: PropTypes.string,\n  primary: PropTypes.bool,\n  editing: PropTypes.bool // flag for new vehicle (blank form) or edit extant vehicle (fill form w/details)\n}\n\nexport default VLManual","import React from 'react'\nimport PropTypes from 'prop-types'\n\nimport { manufacturers } from '../../helpers'\n\nclass VLYMM extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      year: new Date().getFullYear(),\n      make: '',\n      models: [],\n      model: '',\n      showConfirmButton: false\n    }\n  }\n\n  async lookupModelsByYearAndMake() {\n    // console.log(\"Select changed. Calling lookupMakeQuery... \")\n    if (!this.state || !this.state.year || !this.state.make) {\n      return console.log('leaving lookup early due to no year or make selected...')\n    }\n    // console.log('Make selected: '+this.state.make)\n    // check for a local cache of the query\n    const localStorageKey = this.state.year.toString() + this.state.make.toString()\n    const localStorageModels = localStorage.getItem(localStorageKey)\n    if (localStorageModels !== null) {\n      console.log('Duplicate query. Retrieving cache from localStorage...')\n      const localStorageModelsArray = localStorageModels.split(',') // turns comma-delineated string into array of strings\n      console.log(localStorageModelsArray)\n      this.setState({ models: localStorageModelsArray, showConfirmButton: false })\n    } else {\n      fetch(`https://vpic.nhtsa.dot.gov/api/vehicles/getmodelsformakeyear/make/${this.state.make}/modelyear/${this.state.year}?format=json`)\n        .then(async data => {\n          const json = await data.json()\n          let models = json[\"Results\"]\n          // alphabetize results\n          models.sort((a, b) => {\n            if (a[\"Model_Name\"] > b[\"Model_Name\"]) return 1\n            if (a[\"Model_Name\"] < b[\"Model_Name\"]) return -1\n            else return 0\n          })\n          const modelsArray = models.map(model => model[\"Model_Name\"])\n          // console.log(modelsArray)\n          // cache query results\n          if (modelsArray.length > 0) localStorage.setItem(localStorageKey, modelsArray)\n          this.setState(prevState => ({ models: [...modelsArray], showConfirmButton: false }))\n        })\n        .catch(err => console.error(err))\n    }\n  }\n  \n  handleSelectChange = async event => {\n    event.preventDefault()\n    // await state change before calling the next method as that relies on the updated state value...\n    await this.setState({ [event.target.name]: event.target.value })\n    if (this.state && this.state.year && this.state.make) {\n      this.lookupModelsByYearAndMake()\n    }\n    if (this.state && this.state.year && this.state.make && this.state.models && this.state.model) {\n      await this.setState({ showConfirmButton: true })\n    }\n  }\n\n  render() {\n    const thisYear = new Date().getFullYear()\n\n    return (\n      <div className=\"form vehicleLookupDiv\">\n        <div className=\"vehicleLookupInput\">\n          <label htmlFor=\"year\">Year</label>\n          <select name=\"year\" defaultValue={thisYear} onChange={this.handleSelectChange}>\n            { \n              Array.from(Array(thisYear - 1920).keys()).map((item, i) => <option key={i} value={thisYear - i}>{thisYear - i}</option> )\n            }\n          </select>\n          <label htmlFor=\"make\">Make</label>\n          <select name=\"make\" defaultValue=\"\" onChange={this.handleSelectChange}>\n            <option value=\"\" disabled=\"disabled\">Select a manufacturer...</option>\n            {\n              manufacturers.map((val, idx) => <option key={val} value={val}>{val}</option> )\n            }\n          </select>\n          <label htmlFor=\"model\">Model</label>\n          <select name=\"model\" defaultValue=\"First select a make...\" onChange={this.handleSelectChange}>\n            <option value=\"First select a make...\" disabled=\"disabled\">First select a manufacturer...</option>\n            { this.state.models.length > 0 &&\n              this.state.models.map((val, idx) => <option key={val} value={val}>{val}</option> )\n            }\n          </select>\n      </div>\n      { this.state.showConfirmButton && \n        <button className=\"button\" onClick={() => this.props.saveNewVehicle(this.state)}>Add Vehicle To Account</button>\n      }\n    </div>\n    )\n  }\n}\n\nVLYMM.propTypes = {\n  saveNewVehicle: PropTypes.func.isRequired\n}\n\nexport default VLYMM","import React, { useContext, useEffect, useState } from 'react'\nimport PropTypes from 'prop-types'\nimport axios from 'axios'\nimport { useHistory } from 'react-router-dom'\nimport { toast } from 'react-toastify'\n\nimport VLVin from './VLVin'\nimport VLManual from './VLManual'\nimport VLYMM from './VLYMM'\nimport Loading from '../Loading'\n\nimport UserContext from '../../contexts/UserContext'\nimport { addVehicle, updateVehicle } from '../../helpers'\nimport '../../styles/vehicle.css'\n\nfunction VehicleSettings(props) {\n  console.log('loading vehicle settings with props:')\n  console.dir(props)\n  const history = useHistory()\n  const [vehicleLookupsShowing, showVehicleLookups] = useState(false)\n  const [manualLookupShowing, showManualLookup] = useState(false)\n  const [vinLookupShowing, showVinLookup] = useState(false)\n  const [yearMakeModelLookupShowing, showYearMakeModelLookup] = useState(false)\n  // dictionary of shape { vehicleID : Boolean } for if that vehicle ID is being edited currently\n  // this controls whether the edit vehicle (VLManual component) is loaded for that vehicle \n  const [vehiclesEditing, changeVehicleEditStatus] = useState({})\n  const [loading, setLoading] = useState(false)\n  const {user, updateUserState} = useContext(UserContext)\n\n  useEffect(() => {\n    if (props.vehicles && props.vehicles.length > 0) {\n      let transform = {}\n      props.vehicles.forEach(vehicle => {\n        transform[vehicle._id] = false \n      })\n      console.log('component mounting, initializing state for whether each individual vehicle is being edited or not') \n      console.log(transform)\n      if (Object.keys(vehiclesEditing).length === 0) changeVehicleEditStatus({...transform})\n    }\n  }, [props.vehicles, vehiclesEditing])\n  \n  const vehicleLookupChanger = view => {\n    showVehicleLookups(true)\n    showVinLookup(false)\n    showManualLookup(false)\n    showYearMakeModelLookup(false)\n    // view useState toggles: showYearMakeModelLookup, showVinLookup, or showManualLookup\n    // [view](true) -- TODO make this dynamic function call work instead of the switch...\n    switch (view) {\n      case 'showVinLookup': \n        showVinLookup(true)\n        break\n      case 'showManualLookup': \n        showManualLookup(true)\n        break\n      case 'showYearMakeModelLookup': \n        showYearMakeModelLookup(true)\n        break\n      default: showYearMakeModelLookup(true)\n    }\n  }\n\n  const saveNewVehicle = async vehicle => {\n    setLoading(true)\n    // ensure even optional properties are sent to the server/db\n    vehicle.make = vehicle.make || ''\n    vehicle.model = vehicle.model || ''\n    vehicle.odometer = vehicle.odometer || 0\n    vehicle.vin = vehicle.vin || ''\n    vehicle.year = vehicle.year || ''\n    vehicle.primary = vehicle.primary || false\n    // ensure unnecessary state items are not passed to the server/db\n    delete vehicle.models // from year+make+model vehicle lookup\n    delete vehicle.showConfirmButton // from year+make+model vehicle lookup\n\n    // console.log('Save New Vehicle in VehicleSettings. Adding vehicle:')\n    // console.dir(vehicle)\n    const newLogVehicleArrays = await addVehicle(vehicle)\n    // console.log('returned to saveNewVehicle in VehicleSettings')\n    // console.log(newLogVehicleArrays)\n    const newUser = {...user, log: newLogVehicleArrays.log, vehicles: newLogVehicleArrays.vehicles}\n    await updateUserState({ ...newUser })\n    showVehicleLookups(false)\n    setLoading(false)  \n  }\n\n  const saveVehicleChanges = async vehicle => {\n    // console.log('saveVehicleChanges called from VehicleSettings component')\n    // console.log(vehicle)\n    if (!vehicle || !vehicle.id || !vehicle.owner) return new Error('Problem updating vehicle. Please try again.')\n    setLoading(true)\n    // ensure even optional properties are sent to the server/db\n    vehicle.make = vehicle.make || ''\n    vehicle.model = vehicle.model || ''\n    vehicle.odometer = vehicle.odometer || 0\n    vehicle.vin = vehicle.vin || ''\n    vehicle.year = vehicle.year || ''\n    vehicle.primary = vehicle.primary || false\n    vehicle._id = vehicle.id\n\n    // set state to no longer be editing this vehicle after saving updates\n    changeVehicleEditStatus({ ...vehiclesEditing, [vehicle._id]: !vehiclesEditing[vehicle._id] })\n    const newLogVehicleArrays = await updateVehicle(vehicle)\n    // console.log('sent changes to server. results: ')\n    // console.log(newLogVehicleArrays)\n    const newUser = {...user, log: newLogVehicleArrays.log, vehicles: newLogVehicleArrays.vehicles}\n    await updateUserState({ ...newUser })\n    showVehicleLookups(false)\n    setLoading(false)\n  }\n\n  const deleteVehicle = async vehicleId => {\n    if (!vehicleId) return toast('Unable to locate vehicle ID. Please try again.')\n    setLoading(true)\n    console.log('Deleting vehicle: '+vehicleId)\n    // DOMAIN/api/delete/vehicle/:vehicleId\n    const url = `${process.env.REACT_APP_API_DOMAIN}/api/delete/vehicle/${vehicleId}`\n    try {\n      const result = await axios.post(url)\n      console.log('got results from delete vehicle post:')\n      console.dir(result)\n      if (result.status === 200) {\n        // update State to remove the deleted entry\n        const newVehicleList = user.vehicles.filter(vehicle => vehicle._id !== vehicleId)\n        console.log('Purged deleted vehicle. New vehicle list: ')\n        console.log(newVehicleList)\n        delete user.vehicles\n        user.vehicles = [...newVehicleList]\n        await updateUserState(user)\n        setLoading(false)\n        return history.push(`/settings`)\n      }\n    } catch(err) {\n      console.error(err)\n      setLoading(false)\n    }\n  }\n\n  if (loading) return <Loading message=\"Loading/Updating Vehicle Settings...\" />\n\n  return (\n    <div className=\"card\">\n      <h3>{`Vehicle${(props.vehicles && props.vehicles.length) > 1 ? \"s\": \"\"}`}</h3>\n      <div>\n      { (props.vehicles && props.vehicles.length > 0) && props.vehicles.map(vehicle => {\n          return (\n            <div key={vehicle._id} className={`${vehicle.primary ? 'vehicle__container padded primary' : 'vehicle__container padded'}`} >\n              <h4>{vehicle.year}&nbsp;{vehicle.make}&nbsp;{vehicle.model}</h4>\n              <div className=\"card vehicle__editor\">\n                <button \n                  className={vehiclesEditing[vehicle._id] ? `button warn` : `button`} \n                  onClick={() => changeVehicleEditStatus({ ...vehiclesEditing, [vehicle._id]: !vehiclesEditing[vehicle._id] }) } >\n                    { vehiclesEditing[vehicle._id] ? `Close Editor Without Saving` : `Edit` }\n                </button>\n                { vehiclesEditing[vehicle._id] && \n                <>\n                  <VLManual {...vehicle} saveNewVehicle={saveNewVehicle} saveVehicleChanges={saveVehicleChanges} editing={true} /> \n                  <button className=\"button delete delete__vehicle\" onClick={() => deleteVehicle(vehicle._id)}>Permanently Delete Vehicle</button>\n                </>\n                }\n              </div>\n            </div>\n          )\n        }) \n      }\n      </div>\n      <div className=\"add__vehicle__container padded\">\n        { vehicleLookupsShowing && \n          <>\n            <div className=\"buttons__holder\">\n              <button className=\"button\" onClick={() => showVehicleLookups(false)} >Hide Vehicle Search</button>\n            </div>\n            <div className=\"buttons__holder\">\n              <span>Find Vehicle By:</span>\n              <button className={`lookup__button ${yearMakeModelLookupShowing ? 'lookup__selected' : ''}`} onClick={() => vehicleLookupChanger('showYearMakeModelLookup')}>Make &amp; Model</button>\n              <button className={`lookup__button ${vinLookupShowing ? 'lookup__selected' : ''}`} onClick={() => vehicleLookupChanger('showVinLookup')}>VIN</button>\n              <button className={`lookup__button ${manualLookupShowing ? 'lookup__selected' : ''}`} onClick={() => vehicleLookupChanger('showManualLookup')}>Manually Enter</button>\n            </div>\n            <div className=\"lookupSwitcher\">\n              { vinLookupShowing && <VLVin currentVehicle={(props.selectedVehicles && props.selectedVehicles.length > 0 && props.selectedVehicles[0]) || {}} saveNewVehicle={saveNewVehicle} /> }\n              { yearMakeModelLookupShowing && <VLYMM currentVehicle={(props.selectedVehicles && props.selectedVehicles.length > 0 && props.selectedVehicles[0]) || {}} saveNewVehicle={saveNewVehicle} /> }\n              { manualLookupShowing && <VLManual saveNewVehicle={saveNewVehicle} saveVehicleChanges={saveVehicleChanges} /> }\n            </div>\n          </> }\n          \n        { !vehicleLookupsShowing && \n            <div className=\"buttons__holder\">\n              <button className=\"button\" onClick={() => showVehicleLookups(true)} >Add A New Vehicle</button>\n            </div>\n        }\n      </div>\n    </div>\n  )\n}\n\nVehicleSettings.propTypes = {\n  vehicles: PropTypes.array.isRequired,\n  selectedVehicles: PropTypes.array\n}\n\nexport default VehicleSettings","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { useHistory } from 'react-router-dom'\n\nimport Logout from '../components/account/Logout'\nimport AccountSettings from '../components/account/AccountSettings'\nimport ThemeSwitcher from '../components/account/ThemeSwitcher'\nimport VehicleSettings from '../components/vehicle/VehicleSettings'\n\nimport '../styles/settings.css'\n\nfunction Settings(props) {  \n  const history = useHistory()\n\n  return (\n    <div className=\"inner\">\n      <h2>Settings</h2>\n      \n      <div className=\"padded\">\n        <VehicleSettings \n          selectedVehicles={props.user.selectedVehicles} \n          vehicles={props.user.vehicles} \n          history={history} />\n        <AccountSettings user={props.user} updateUserState={props.updateUserState} />\n        <ThemeSwitcher />\n        <Logout history={history} user={props.user} updateUserState={props.updateUserState} />\n      </div>\n    </div>\n  )\n}\n\nSettings.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default Settings\n","import React from 'react'\nimport { Link, useParams } from 'react-router-dom'\nimport PropTypes from 'prop-types'\nimport moment from 'moment'\nimport { ReactSVG } from 'react-svg'\n\nimport PhotoEditor from '../components/PhotoEditor'\nimport EditPencil from '../images/editPencil.svg'\n\nimport '../styles/singleLogEntry.css'\n\nfunction SingleLogEntry(props) {\n  const { slug } = useParams()\n  const log = props.user.log.filter(entry => entry.slug === slug)\n  const { id, shortDescription, longDescription, dateStarted, dateCompleted, dateEntered, dateDue, mileageDue, name, odometer, tools, parts, partsCost, laborCost, serviceLocation, photos } = log[0]\n  const vehicleID = log[0].vehicle\n  const vehicleArray = props.user.vehicles.filter(_vehicle => _vehicle.id === vehicleID)\n  const vehicle = vehicleArray[0]\n\n  return (\n    <div className=\"inner\">\n      <div className=\"card\">\n        <h2>{name.length > 120 ? `${name.substring(0,120)}...` : name}</h2>\n        <div className=\"padded single__details\">\n          <div>\n            <div>\n              <strong>Service Performed: </strong>\n              <span>{shortDescription}</span>\n            </div>\n            <div>\n              <strong>Date Entered: </strong>\n              <span>{moment(dateEntered).format(\"MMM Do YYYY\")}</span>\n            </div>\n            <div>\n              <strong>Vehicle: </strong>\n              <span>{vehicle.year} {vehicle.make} {vehicle.model} {` at `} {odometer && Number(odometer).toLocaleString()} {` miles`}</span>\n            </div>\n          </div>\n          <div>\n            <strong>Long Description: </strong>\n            <span>{longDescription}</span>\n          </div>\n          <div>\n            <div>\n              <strong>Started: </strong>\n              <span>{moment(dateStarted).format(\"MMM Do YYYY\")}</span>\n            </div>\n            <div>\n              <strong>Completed: </strong>\n              <span>{moment(dateCompleted).format(\"MMM Do YYYY\")}</span>\n            </div>\n          </div>\n          <div>\n            {(mileageDue || dateDue) && \n            <>\n              <strong>Service is Due Next: </strong>\n              <span>{mileageDue > 0 ? `At ${Number(mileageDue).toLocaleString()} miles. ` : \"[unset] miles. \"} {dateDue && \"On \" && moment(dateDue).format(\"MMM Do YYYY\")}</span>\n            </>\n            }\n          </div>\n          <div>\n            <div>\n              <strong>Tools: </strong>\n              <span>{tools}</span>\n            </div>\n            <div>\n              <strong>Parts: </strong>\n              <span>{parts}</span>\n            </div>\n          </div>\n          <div>\n            <div>\n              <strong>Parts Cost: </strong>\n              <span>${partsCost && partsCost.toLocaleString()}</span>            \n            </div>\n            <div>\n              <strong>Labor Cost: </strong>\n              <span>${laborCost && laborCost.toLocaleString()}</span>\n            \n            </div>\n          </div>\n          <div>\n            <strong>Service Location: </strong>\n            <span>{serviceLocation}</span>\n          </div>\n\n          <Link className=\"button editPencil\" to={`/log/${id}/edit`}>\n            <ReactSVG src={EditPencil} role=\"img\" aria-label=\"Edit Pencil Icon\" fallback={() => <img src={EditPencil} alt=\"edit pencil icon\" description=\"edit pencil icon\" className=\"svg\" />} /> \n            <h5>Edit</h5>\n          </Link>\n\n        { photos && photos.length > 0 && <PhotoEditor photos={photos} editingBlocked={true} /> }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nSingleLogEntry.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n  updateUserState: PropTypes.func.isRequired\n}\n\nexport default SingleLogEntry ","import React, { useState, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { Link } from 'react-router-dom'\n\nimport VehiclesSelector from '../components/vehicle/VehiclesSelector'\nimport LogEntry from '../components/log/LogEntry'\nimport LogSorter from '../components/log/LogSorter'\n\nfunction Todo(props) {\n  const [vehiclesShowing, changeVehiclesShowing] = useState([])\n  const [entriesShowing, changeEntriesShowing] = useState([])\n  \n  // at initial mount, setup data for rendering\n  useEffect(() => {\n    // Defaults to the currently selectedVehicle(s) ID(s) if any, OR\n    // Defaults to all ID(s) in the user's vehicles array\n    const veh = []\n    if (props.user.selectedVehicles.length > 0) { \n      props.user.selectedVehicles.forEach(vehicle => {\n        if (vehicle !== undefined && vehicle.id) veh.push(vehicle.id)\n      })\n    } else if (props.user.vehicles.length > 0) {\n      props.user.vehicles.forEach(vehicle => {\n        if (vehicle !== undefined && vehicle.id) veh.push(vehicle.id)\n      })\n    }\n    changeVehiclesShowing([...veh])\n\n    const ent = props.user.log.filter(logEntry => {\n      // each log entry has a:\n      // \"vehicle\" field which holds the String ID of the vehicle for this service\n      // \"mileageDue\" field which is an optional future odometer number at which the service repeats\n      // \"dateDue\" field which is an optional future date at which the service repeats\n      if (veh.includes(logEntry.vehicle) && (logEntry.mileageDue !== null || logEntry.dateDue !== null)) {\n        return logEntry\n      }\n    })\n    changeEntriesShowing(ent)\n  }, []) // empty [] only runs this at initial startup, prevents infinite re-render loop\n  \n  const changeVehicleStatus = event => {\n    const clickedOnVehicleId = event.target.name\n    let vehicleUpdates = []\n    // if it is already in the list, remove it\n    if (vehiclesShowing.includes(clickedOnVehicleId)) {\n      vehicleUpdates = vehiclesShowing.filter(vehicleId => vehicleId !== clickedOnVehicleId)\n    } else { // if it was not in the list, add it\n      vehicleUpdates = vehiclesShowing\n      vehicleUpdates.push(clickedOnVehicleId)\n    }\n    changeVehiclesShowing(vehicleUpdates)\n    const logUpdates = props.user.log.filter(logEntry => {\n      if (vehicleUpdates.includes(logEntry.vehicle) && (logEntry.mileageDue !== null || logEntry.dateDue !== null)) {\n        return logEntry\n      }\n    })\n    changeEntriesShowing(logUpdates)\n  }\n\n  return (\n    <div className=\"inner\">\n      <h2>Upcoming Service{Object.keys(entriesShowing).length > 1 ? 's': ''}</h2>\n      <VehiclesSelector allVehicles={props.user.vehicles} vehiclesShowing={vehiclesShowing} changeVehiclesShowing={changeVehicleStatus} />\n      { entriesShowing.length === 0 &&\n        <div className=\"card no__todos padded\">\n          <h3>No Future-Due Log Entries Found!</h3>\n        <div>\n            <p className=\"padded\">No log entries for the vehicles selected. Please select more vehicles or add a new entry.</p>\n          </div>\n          <Link className=\"button\" to=\"/add\">Add A Log Entry Now</Link>\n          <Link className=\"button\" to=\"/log\">Review Your Log</Link>\n        </div>\n      }\n      { entriesShowing.length > 0 &&\n        <div className=\"padded\">\n          <LogSorter {...props} />\n          {entriesShowing && entriesShowing.map(entry => <LogEntry key={entry._id} data={entry} />)}\n        </div>\n      }\n    </div>\n  )\n}\n\nTodo.propTypes = {\n  user: PropTypes.shape({\n    cookies: PropTypes.string,\n    email: PropTypes.string,\n    log: PropTypes.array,\n    name: PropTypes.string,\n    sessionID: PropTypes.string,\n    userID: PropTypes.string,\n    vehicles: PropTypes.array,\n    selectedVehicles: PropTypes.array\n  }),\n}\n\nexport default Todo","import React from 'react'\nimport { NavLink } from 'react-router-dom'\nimport { ReactSVG } from 'react-svg'\n\nimport Settings from '../images/account.svg'\nimport Add from '../images/addLog.svg'\nimport Log from '../images/log.svg'\nimport Search from '../images/search.svg'\nimport Todo from '../images/todo.svg'\n\nimport '../styles/nav.css'\n\nfunction Nav() {\n  return (\n    <nav className='nav'>\n      <NavLink to='/log' exact className='card navLink' activeClassName='navLink--active'>\n        <ReactSVG \n          src={Log} \n          role=\"img\" \n          className=\"svg__dark__fill\"\n          aria-label=\"Log Icon\" \n          fallback={() => <img src={Log} alt=\"log icon\" description=\"log icon\" className=\"svg svg__dark__fill\" />} /> \n        <h5>Log</h5>\n      </NavLink>\n      <NavLink to='/add' exact className='card navLink' activeClassName='navLink--active'>\n        <ReactSVG \n          src={Add} \n          role=\"img\" \n          className=\"svg__dark__fill\"\n          aria-label=\"Add Icon\" \n          fallback={() => <img src={Add} alt=\"add icon\" description=\"add icon\" className=\"svg svg__dark__fill\" />} /> \n        <h5>Add</h5>\n      </NavLink>\n      <NavLink to='/todo' exact className='card navLink' activeClassName='navLink--active'>\n        <ReactSVG \n          src={Todo} \n          role=\"img\" \n          className=\"svg__dark__fill\"\n          aria-label=\"Todo Icon\" \n          fallback={() => <img src={Todo} alt=\"todo icon\" description=\"todo icon\" className=\"svg svg__dark__fill\" />} /> \n        <h5>Todo</h5>\n      </NavLink>\n      <NavLink to='/search' exact className='card navLink' activeClassName='navLink--active'>\n        <ReactSVG \n          src={Search} \n          role=\"img\" \n          className=\"svg__dark__fill\"\n          aria-label=\"Search Icon\" \n          fallback={() => <img src={Search} alt=\"search icon\" description=\"search icon\" className=\"svg svg__dark__fill\" />} /> \n        <h5>Search</h5>\n      </NavLink>\n      <NavLink to='/settings' exact className='card navLink' activeClassName='navLink--active'>\n        <ReactSVG \n          src={Settings} \n          role=\"img\" \n          className=\"svg__dark__fill\"\n          aria-label=\"Settings Icon\" \n          fallback={() => <img src={Settings} alt=\"settings icon\" description=\"settings icon\" className=\"svg svg__dark__fill\" />} /> \n        <h5>Settings</h5>\n      </NavLink>\n    </nav>\n  )\n}\n\nexport default Nav","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom'\nimport PropTypes from 'prop-types'\n\nfunction ProtectedRoute(props) {\n  return props.isLoggedIn ? <Route {...props}>{props.children}</Route> : <Redirect to='/welcome' />\n}\n\nProtectedRoute.propTypes = {\n  isLoggedIn: PropTypes.bool.isRequired,\n  exact: PropTypes.bool, // exact and path are passed to the Route child component\n  path: PropTypes.string.isRequired\n}\n\nexport default ProtectedRoute","import { useEffect } from \"react\"\nimport { useLocation } from \"react-router-dom\"\n\nexport default function ScrollToTop() {\n  const { pathname } = useLocation()\n\n  useEffect(() => {\n    window.scrollTo(0, 0)\n  }, [pathname])\n\n  return null\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { ReactSVG } from 'react-svg'\n\nimport Home from '../images/home.svg'\nimport '../styles/siteTitle.css'\n\nfunction SiteTitle() {\n  return (\n    <Link to='/' className='siteTitle'>\n      <ReactSVG src={Home} role=\"img\" aria-label=\"Home Icon\" className=\"svg\" fallback={() => <img src={Home} alt=\"home icon\" description=\"home icon\" className=\"svg svg__dark__fill\" />} /> \n      <h1>Vehicle Maintenance Log</h1>\n    </Link>\n  )\n}\n\nexport default SiteTitle","import React from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { ToastContainer } from 'react-toastify'\nimport 'react-toastify/dist/ReactToastify.css'\n\nimport Add from './pages/Add'\nimport Edit from './pages/Edit'\nimport GuestHome from './pages/GuestHome'\nimport Home from './pages/Home'\nimport Log from './pages/Log'\nimport NotFound from './pages/NotFound'\nimport PasswordReset from './pages/PasswordReset'\nimport Search from './pages/Search'\nimport Settings from './pages/Settings'\nimport SingleLogEntry from './pages/SingleLogEntry'\nimport Todo from './pages/Todo'\n\nimport Nav from './components/Nav'\nimport ProtectedRoute from './components/account/ProtectedRoute'\nimport ScrollToTop from './components/ScrollToTop'\nimport SiteTitle from './components/SiteTitle'\n\nimport { UserConsumer } from './contexts/UserContext'\n\nfunction AppRouter() {\n  return (\n    <Router>\n      <ScrollToTop />\n      <SiteTitle />\n      <UserConsumer>\n        {({ user, updateUserState, isLoggedIn, login, logout }) => \n        <div className=\"container\">\n          <ToastContainer\n            position=\"top-center\"\n            autoClose={6500}\n            hideProgressBar={false}\n            newestOnTop={true}\n            closeOnClick\n            pauseOnFocusLoss\n            draggable\n            pauseOnHover\n          />\n\n          <Switch>\n            <Route path=\"/welcome\">\n              <GuestHome login={login} updateUserState={updateUserState} />\n            </Route>\n            <ProtectedRoute path=\"/add\" isLoggedIn={isLoggedIn} >\n              <Add user={user} updateUserState={updateUserState} />\n            </ProtectedRoute>\n            <ProtectedRoute path=\"/log\" exact isLoggedIn={isLoggedIn} >\n              <Log user={user} updateUserState={updateUserState} />\n            </ProtectedRoute>\n            <ProtectedRoute path=\"/log/:id/edit\" exact isLoggedIn={isLoggedIn} >\n              <Edit user={user} updateUserState={updateUserState} />\n            </ProtectedRoute>\n            <ProtectedRoute path=\"/log/:slug\" exact isLoggedIn={isLoggedIn} >\n              <SingleLogEntry user={user} updateUserState={updateUserState} />\n            </ProtectedRoute>\n            <ProtectedRoute path=\"/search\" isLoggedIn={isLoggedIn} >\n              <Search user={user} updateUserState={updateUserState} />\n            </ProtectedRoute>\n            <ProtectedRoute path=\"/settings\" isLoggedIn={isLoggedIn} >\n              <Settings user={user} updateUserState={updateUserState} logout={logout} />\n            </ProtectedRoute>\n            <ProtectedRoute path=\"/todo\" isLoggedIn={isLoggedIn} >\n              <Todo user={user} updateUserState={updateUserState} />\n            </ProtectedRoute>\n            <ProtectedRoute path=\"/\" exact isLoggedIn={isLoggedIn} >\n              <Home user={user} updateUserState={updateUserState} />\n            </ProtectedRoute>\n            <Route path=\"/account/reset/:token\" exact>\n              <PasswordReset updateUserState={updateUserState} />\n            </Route>\n            <Route path=\"*\">\n              <NotFound />\n            </Route>\n          </Switch>\n          { isLoggedIn && <Nav /> }\n        </div>\n        }\n      </UserConsumer>\n    </Router>\n  )\n}\n\nexport default AppRouter\n","import React from 'react'\n\nimport { UserProvider } from './contexts/UserContext'\nimport AppRouter from './AppRouter'\n\nimport './styles/normalize.css'\nimport './styles/layout.css'\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    this.state = {\n      user: {\n        name: '', \n        userID: '', \n        sessionID: '', \n        cookies: '',\n        email: '',\n        vehicles: [],\n        log: [],\n        selectedVehicles: []\n      }, \n      updateUserState: this.updateUserState,\n      isLoggedIn: false,\n      login: this.login,\n      logout: this.logout\n    }\n  }\n  \n  logout = () => {\n    localStorage.removeItem('maint_log_username')\n    this.setState({\n      user: { name: '', userID: '', sessionID: '', cookies: '', email: '', log: [], vehicles: [], selectedVehicles: [] },\n      isLoggedIn: false  \n    })\n  }\n\n  login = user => {\n    this.saveUserToLocalStorage(user)\n    this.setState({ user, isLoggedIn: true })\n  }\n\n  updateUserState = user => {\n    this.saveUserToLocalStorage(user)\n    this.setState({ user })\n  }\n\n  saveUserToLocalStorage = user => {\n    localStorage.setItem('maint_log_user', JSON.stringify(user))\n  }\n\n  // APP SETUP - find user preferences if any are saved locally\n  componentDidMount() {\n    // Theme\n    const preferredTheme = localStorage.getItem('maint_log_theme') || 'dark'\n    document.documentElement.className = preferredTheme\n    localStorage.setItem('maint_log_theme', preferredTheme)\n\n    // Full User Account (for Saved Logins)\n    const userRaw = localStorage.getItem('maint_log_user')\n    console.log('User Raw:')\n    console.log(userRaw)\n\n    if (userRaw !== null && Object.keys(userRaw).length > 0 && userRaw[\"name\"] && userRaw[\"name\"] !== \"\" && userRaw[\"name\"].length > 0) {\n      const user = JSON.parse(userRaw)\n      console.log('Mounted App. Found Previously-Saved User:')\n      console.log(user)\n      this.setState({ user, isLoggedIn: true })\n    } else {\n      // Username Only (for Saved Logins)\n      const username = localStorage.getItem('maint_log_username')\n      if (username !== null) {\n        console.log('Mounted App. Saved Username Found in LocalStorage.')\n        this.setState({ user: { name: username }, isLoggedIn: false })\n      }\n    }\n  }\n\n  render() {\n    const context = { \n      user: this.state.user, \n      isLoggedIn:this.state.isLoggedIn, \n      updateUserState: this.updateUserState, \n      login: this.login, \n      logout: this.logout \n    }\n\n    return (\n      <UserProvider value={context}>\n        <AppRouter />\n      </UserProvider>\n    )\n  }\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/search.fb5ad7c7.svg\";","module.exports = __webpack_public_path__ + \"static/media/addLog.a918556d.svg\";","module.exports = __webpack_public_path__ + \"static/media/todo.91e3307a.svg\";","module.exports = __webpack_public_path__ + \"static/media/account.e5a41a1f.svg\";","module.exports = __webpack_public_path__ + \"static/media/log.0476682c.svg\";","module.exports = __webpack_public_path__ + \"static/media/magnifying.369e264b.svg\";","module.exports = __webpack_public_path__ + \"static/media/editPencil.bd86eac2.svg\";","module.exports = __webpack_public_path__ + \"static/media/home.d6ad0c97.svg\";"],"sourceRoot":""}